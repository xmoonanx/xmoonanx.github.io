---
title: "[CS] Computer Networking - Transport layer(1): Multi/Demulti, UDP"

categories: [CS, Computer Networking]
tags:
  - [CS, Computer Networking, Transport layer]
toc: true
toc_sticky: true

date: 2025-03-24
last_modified_at: 2025-03-24
---
>ğŸ“šì»´í“¨í„° ë„¤íŠ¸ì›Œí¬ ì „ê³µ ìˆ˜ì—… ì •ë¦¬

## Transport Layer
---
**<span style="color: #008000">Transport Layer</span>**: ì„œë¡œ ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨ë“¤ì´ **ë§ˆì¹˜ ì§ì ‘ ì—°ê²°ëœ ê²ƒì²˜ëŸ¼ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì—­í• **

![alt text](../assets/img/Computer_Network/Layer_segment.png)
> Transport layerëŠ” Application layerì—ì„œ **messageë¥¼ ë°›ìœ¼ë©´ segmentë¡œ ë‚˜ëˆ”.**  
> ê·¸ **segmentëŠ” Network layerì—ì„œ packetí˜•íƒœë¡œ ë³€í™˜ë˜ì–´ receiverì—ì„œ ìˆ˜ì‹ ë¨**

![alt text](../assets/img/Computer_Network/Sender_Receiver.png)

### Two principal Internet transport protocols
---
#### TCP(Transmission Control Protocol)
* <span style="color: #008000"><span style="color: #008000">reliable ë°ì´í„° ì „ì†¡</span>: ë°ì´í„°ê°€ ì†ì‹¤ë˜ì§€ ì•Šë„ë¡ ë³´ì¥
* <span style="color: #008000">in-order delivery</span>: ë³´ë‚¸ ìˆœì„œëŒ€ë¡œ ë°ì´í„°ê°€ ë„ì°©í•¨
* <span style="color: #008000">congestion control</span>: ë„¤íŠ¸ì›Œí¬ ìƒí™©ì— ë”°ë¼ ë°ì´í„° ì „ì†¡ ì†ë„ ì¡°ì ˆ
* <span style="color: #008000">flow control</span>: ìˆ˜ì‹ ìì˜ ì²˜ë¦¬ ëŠ¥ë ¥ì— ë§ì¶° ë°ì´í„° ì „ì†¡
* <span style="color: #008000">connection setup</span>: ë°ì´í„° ì „ì†¡ ì „ì— ì—°ê²°ì„ ë¨¼ì € ì„¤ì •

#### UDP(User Datagram Protocol)
* `unreliable`: ë°ì´í„° ì†ì‹¤ì´ ë°œìƒí•  ìˆ˜ ìˆìŒ
* `unordered delivery`: ë³´ë‚¸ ìˆœì„œì™€ ë‹¤ë¥´ê²Œ ë„ì°©í•  ìˆ˜ ìˆìŒ
* `ë‹¨ìˆœí•¨`: TCPë³´ë‹¤ ë‹¨ìˆœí•œ êµ¬ì¡°

âŒë‹¤ìŒ ë‘ ì„œë¹„ìŠ¤ëŠ” TCPì™€ UDP ëª¨ë‘ ì œê³µ ì•ˆí•¨  
* **delay guarantees**: íŠ¹ì • ì‹œê°„ ë‚´ì— ë°ì´í„°ê°€ ë„ì°©í•œë‹¤ëŠ” ë³´ì¥ ì—†ìŒ
* **andwidth guarantees**: íŠ¹ì • ì „ì†¡ ì†ë„ë¥¼ ë³´ì¥í•˜ì§€ ì•ŠìŒ

### Multiplexing/Demultiplexing
---
> <span style="color: #008000">Multiplexing</span>: ë‹¤ìˆ˜ì˜ ì†Œì¼“ìœ¼ë¡œë¶€í„° ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì¸µì—ì„œ ì²˜ë¦¬ ê°€ëŠ¥í•œ ë°ì´í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë¶„í• í•˜ëŠ” ê³¼ì •  
> <span style="color: #008000">Demultiplexing</span>: ìˆ˜ì‹  ì¸¡ì—ì„œ ë„ì°©í•œ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ í•´ë‹¹ ì†Œì¼“ìœ¼ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ ìˆ˜ì‹  ì¸¡ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ êµ¬ë¶„í•˜ëŠ” ê³¼ì •

ì¦‰, **<span style="color: #008000">Multiplexingì€ ì›í•˜ëŠ” Socketìœ¼ë¡œ ë³´ë‚´ê¸° ìœ„í•œ ê³¼ì •**ì´ê³  **Demultiplexing ì€ Segmentì—ì„œ ë„˜ì–´ì˜¨ ì •ë³´ë¥¼ ë°›ëŠ” ê³¼ì •</span>**

#### Multiplexing
* `Client1`(í”„ë¡œì„¸ìŠ¤ p3 ì‹¤í–‰), `Client2`(í”„ë¡œì„¸ìŠ¤ p4 ì‹¤í–‰)
* `Server`(í”„ë¡œì„¸ìŠ¤ p1, p2 ì‹¤í–‰)

![alt text](../assets/img/Computer_Network/Multiplexing.png)
> **p1 â†” p3**, **p2 â†” p4** ì—°ê²°ë¨

![alt text](../assets/img/Computer_Network/Multiplexing1.png)
* p1, p2ì—ì„œ ì†Œì¼“ì„ í†µí•´ transport layerë¡œ ë°ì´í„°ë¥¼ ë°€ì–´ë‚¸ë‹¤.
* í•˜ì§€ë§Œ transport layerëŠ” í•˜ë‚˜ì´ë‹¤. 
* ë•Œë¬¸ì— **transport layer**ëŠ” **ì˜¤ëŠ” ë°ì´í„°ë¥¼ ê° ì†Œì¼“ì—ì„œ transport headerë¥¼ ë¶™ì—¬ segmentë¡œ ë§Œë“ ë‹¤.(ìº¡ìŠí™”)**
* ê·¸ë¦¬ê³  segmentë“¤ì„ ë„¤íŠ¸ì›Œí¬ ê³„ì¸µìœ¼ë¡œ ì „ë‹¬í•œë‹¤

#### Demultiplexing
<span style="color: #008000">Demultiplexing</span>ì€ ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘:

1. hostê°€ `IP datagram`ì„ ìˆ˜ì‹ í•œë‹¤.
2. ê° datagramì€ **source IP, destination IPì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆìŒ**
3. ê° datagramì€ **transport-layer segmentë¥¼ carrieí•œë‹¤!**
4. ê°ê°ì˜ **segmentëŠ” source, destinationì˜ port ë²ˆí˜¸**ë¥¼ ê°€ì§„ë‹¤.
5. hostëŠ” **IP adderss & port numberë¥¼ ì‚¬ìš©í•˜ì—¬ segmentë¥¼ ì ì ˆí•œ socketìœ¼ë¡œ ì „ë‹¬**

![alt text](../assets/img/Computer_Network/TCPUDP_segment.png)
> source, dest port # ëŠ” ê°ê° 16bits  
> ì•½ 65,000ê°œ port ì§€ì • ê°€ëŠ¥!

#### Connectionless Demultiplexing : UDP
![alt text](../assets/img/Computer_Network/UDP_Demultiplexing.png)
UDP socket ìƒì„± â†’ destination IP, destination portì˜ socketìœ¼ë¡œ ì „ë‹¬ â†’ ë°›ëŠ” ìª½ì—ì„œ IP, portë¥¼ ë³¸ë‹¤ (transport layerì—ì„œëŠ” port ë§Œ í™•ì¸) â†’ **connectionlessì—ì„œëŠ” destinationë§Œ ê°™ìœ¼ë©´ ê°™ì€ socketìœ¼ë¡œ ì—°ë‹¤**

* ì„œë¡œ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì˜¨ ë°ì´í„°ê·¸ë¨ì´ë¼ë„ **destination portê°€ ê°™ìœ¼ë©´ socketì„ í•˜ë‚˜ë§Œ ì—°ë‹¤**

#### Connextion-oriented demultiplexing : TCP
* TCPëŠ” UDPì™€ ë‹¬ë¦¬ **4-tupleë¡œ socketì„ ì‹ë³„í•œë‹¤**:
  1. **source IP address**
  2. **source port number**
  3. **dest IP address**
  4. **dest port number**

![alt text](../assets/img/Computer_Network/TCP_Demultiplexing.png)
> dest IP/portê°€ ê°™ì•„ë„ source IP/portì— ë”°ë¼ connectionì´ ë‹¬ë¼ì§  
socketì„ ê°ê° ì—°ë‹¤ â†’ destination IP/portê°€ ê°™ì•„ë„ source IP/portê°€ ë‹¤ë¥´ë©´ ê°ê° connectionì´ ë˜ê³ , socketë„ ê°ê° ìƒì„±ë¨

### UDP(User Datagram Protocol)
---
> no frills, bare bones Internet transport protocol : ì•„ë¬´ëŸ° ì¥ì‹ì—†ê³  í•„ìˆ˜ì ì¸ ê²ƒë§Œì„ ê°–ì¶˜ í”„ë¡œí† ì½œ

* **best effort ì„œë¹„ìŠ¤**: ë¹ ë¥´ê²Œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ë˜ ì‹ ë¢°ì„±ì€ ë³´ì¥ X
* **connectionless í†µì‹ **: ì—°ê²° ì„¤ì • ë° í•´ì œ ê³¼ì •ì´ ì—†ìŒ

âœ…**UDP íŠ¹ì§•:**  
1. <span style="color: #008000">Connectionless</span>
  * **handshaking ê³¼ì •ì´ ì—†ìŒ**
  * ê° UDP segmentëŠ” **ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬**
  * senderì™€ reciever ê°„ì— **ì—°ê²° ìƒíƒœ ì •ë³´ ìœ ì§€ ì•ˆ í•¨**
2. <span style="color: #008000">Unreliable Transfer</span>
3. <span style="color: #008000">Congestion control ì—†ìŒ</span>
  * ë„¤íŠ¸ì›Œí¬ ìƒí™©ì— ê´€ê³„ì—†ì´ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ìŸì•„ë¶€ìŒ

![alt text](../assets/img/Computer_Network/UDP_segment.png)
> **Source Port(16bits)**: ì‘ë‹µì´ í•„ìš” ì—†ëŠ” ê²½ìš° 0ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŒ  
> **Destination Port(16bits)**: ë°ì´í„°ë¥¼ ì˜¬ë°”ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ë° ì‚¬ìš©  
> **Length(16bits)**: UDP headerì™€ dataë¥¼ í¬í•¨í•œ ì „ì²´ segmentì˜ length(ë°”ì´íŠ¸ ë‹¨ìœ„)
> **Checksum(16bits)**: ì „ì†¡ ì¤‘ ë°œìƒí•œ ì˜¤ë¥˜ë¥¼ ê²€ì¶œí•˜ê¸° ìœ„í•œ ê°’

âœ…**UDP ì¥ì :**  
- **no connection establishment**: (ë”œë ˆì´ê°€ ì¶”ê°€ë  ìˆ˜ ìˆëŠ”) ì—°ê²°ì„¤ì • ì—†ìŒ
- **simple**: ì—°ê²°ì´ ì—†ê¸° ë•Œë¬¸ì— ê°„ë‹¨í•¨
- **small header size**

* **UDP used by:**
  * ìŠ¤íŠ¸ë¦¬ë° ë©€í‹°ë¯¸ë””ì–´(ex: youtube)
  * DNS ì¡°íšŒ
  * SNMP (Simple Network Management Protocol)
  * HTTP/3(UDP ê¸°ë°˜ì´ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µì—ì„œ ì‹ ë¢°ì„± ì¶”ê°€)
  * ì˜¨ë¼ì¸ ê²Œì„

#### UDP Checksum
**segment ì „ì†¡ ê³¼ì •ì—ì„œ `error`ê°€ ìˆëŠ”ì§€ í™•ì¸** = ê¹¨ì§„ bitê°€ ìˆëŠ”ì§€ í™•ì¸

ğŸ“šê¸°ë³¸ ê°œë…:  
1. senderëŠ” **ë°ì´í„°ì— ëŒ€í•œ ì²´í¬ì„¬ ê°’ì„ ê³„ì‚°í•˜ì—¬ í•¨ê»˜ ì „ì†¡**
2. receiverëŠ” **ë°›ì€ ë°ì´í„°ì— ëŒ€í•´ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì²´í¬ì„¬ì„ ë‹¤ì‹œ ê³„ì‚°**
3. **ê³„ì‚°ëœ ì²´í¬ì„¬ì´ ì „ì†¡ëœ ì²´í¬ì„¬ê³¼ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒ**í–ˆë‹¤ê³  íŒë‹¨

ğŸ“Checksum ê³„ì‚° ë°©ë²•
**UDP ì²´í¬ì„¬ì€ 1ì˜ ë³´ìˆ˜ í•©ì„ ê¸°ë°˜**

```
1110 0110 0110 0110  (ì²« ë²ˆì§¸ 16ë¹„íŠ¸ ì •ìˆ˜)
+ 1101 0101 0101 0101  (ë‘ ë²ˆì§¸ 16ë¹„íŠ¸ ì •ìˆ˜)
---------------------
1 1011 1011 1011 1011  (í•©ê³„, ë§¨ ì•ì˜ 1ì€ carry)

  1011 1011 1011 1011  (ê²°ê³¼)
+                   1  (carryë¥¼ ë‹¤ì‹œ ë”í•¨ - wraparound)
---------------------
  1011 1011 1011 1100  (ìµœì¢… í•©ê³„)
  
  0100 0100 0100 0011  (ì²´í¬ì„¬ - 1ì˜ ë³´ìˆ˜)
```

* **senderëŠ” ê³„ì‚°ëœ ê°’ì„ UDP headerì˜ checksum í•„ë“œì— ì €ì¥í•œë‹¤.**
* receiverë„ ë™ì¼í•˜ê²Œ ê³„ì‚°í•˜ê³  ìˆ˜ì‹ ëœ segmentì˜ checksum ê°’ê³¼ ë¹„êµ
* ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ê°€ ê°ì§€ëœ ê²ƒì´ê³ , ì¼ì¹˜í•˜ë©´ ì˜¤ë¥˜ê°€ ì—†ëŠ” ê²ƒìœ¼ë¡œ íŒë‹¨