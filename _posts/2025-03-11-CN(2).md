---
title: "[CS] Computer Networking: Application layer(1) - soket, HTTP, cache"

categories: [CS, Computer Networking]
tags:
  - [CS, Computer Networking, Application layer]
toc: true
toc_sticky: true

date: 2025-03-11
last_modified_at: 2025-03-11
---
>ğŸ“šì»´í“¨í„° ë„¤íŠ¸ì›Œí¬ ì „ê³µ ìˆ˜ì—… ì •ë¦¬

## Client-server paradigm
---
* **server**:
  * **always-on host**
  * **permanent IP address**
  * often in data centers, for scaling

* **clients**:
  * contact, communicate with server
  * may have dynamic IP addresses

## Sokets
---
* process sends/receives messages to/from **<span style="color: #008000">soket</span>**
* socket analogous to **door**
  * sending process relies on transport infrastructure on other side of door to deliver message to socket at receiving process
* socket interface b/w transfer layer

* ì–´ë–»ê²Œ process(soket)ì´ íŠ¹ì •ë˜ëŠ”ê°€?
  * **IP addr, port-number**ì„ í†µí•´
  * ì˜ˆ: web-server = `203.252.112.1:80`
![alt text](../assets/img/Computer_Network/soket.png)

## Transport protocols
---
### TCP service
---
* **<span style="color: #008000">reliable transport</span>** b/w sending and receiving process
* **<span style="color: #008000">flow control</span>**: sender won't **overwhelm** receiver
* **<span style="color: #008000">congestion control</span>**: throttle sender when network overloaded
* **<span style="color: #008000">connections-oriented</span>**: setup required b/w client and server processes
* does no provide: timing, security, minimum throughput guarantee

### UDP service
---
* faster, lighter than TCP
* **unreliable data transfer**
* **dose no provide**: reliability, flow/congestion control, timing, throughput guarantee or connection setup

## Web and HTTP
### HTTP
---
**<span style="color: #008000">HTTP</span>: hypertext transfer protocol**
* Web's application-layer protocol
* client/serve model
  * **client**: browser that requests, receives, (using HTTP protocol) and **displays** Web objects
  * **server**: Web server sends (using HTTP protocol) objects in response to requests
![alt text](../assets/img/Computer_Network/HTTP_1.png)

* **HTTP uses TCP**:
  1. client initiates TCP connection(**creates socket**) to server, port 80
  2. **server accepts TCP connection** from client
  3. HTTP messages(application-layer protocol messages) exchanged between browser(HTTP client) and Web server(HTTP server)
  4. TCP connection closed
  

* HTTP is **stateless**: ì´ì „ ìš”ì²­ì„ ê¸°ì–µí•˜ì§€ ì•ŠëŠ”ë‹¤.
#### Non-persistent/persistent HTTP
---
âœ… **HTTPê°€ TCPë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì—ëŠ” 2ê°€ì§€ê°€ ìˆë‹¤.**
1. **<span style="color: #008000">Non-persistent HTTP</span>**
  * TCP connectionì„ ìš”ì²­ì´ ë“¤ì–´ì˜¬ë•Œë§ˆë‹¤ ìƒì„±í•˜ê³  ëë‚˜ë©´ close
2. **<span style="color: #008000">Persistent HTTP</span>**
  * ìƒì„±ëœ TCP connectionì„ ê³„ì† ì‚¬ìš©
  * Non-persistentë³´ë‹¤ íš¨ìœ¨ì 
![alt text](../assets/img/Computer_Network/Non_persistent_HTTP1.png)
![alt text](../assets/img/Computer_Network/Non_persistent_HTTP2.png)

* **<span style="color: #008000">RTT(Round Trip Time)</span>**: time for a small packet to travel from client to server and back
  * a small packetì€ Transmission Delayë¥¼ ë¬´ì‹œí•œë‹¤ëŠ” ëœ», ë‹¨ìœ„ íŒ¨í‚·ë‹¹ ë„¤íŠ¸ì›Œí¬ ì™•ë³µì‹œê°„ ì •ë„ë¡œ í•´ì„

![alt text](../assets/img/Computer_Network/RTT.png)
* Non-persistent HTTPì˜ ê²½ìš°
* **TCP ì»¤ë„¥ì…˜ì„ ìƒì„±í•  ë•Œ ë§ˆë‹¤ 1RTTê°€ ì†Œìš”.**
* **ì›í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ë°›ê¸°ìœ„í•´ 1RTTê°€ ì†Œìš”.**
* ì¦‰ Non-persistent HTTPì—ì„œ ì˜¤ë¸Œì íŠ¸ í•˜ë‚˜ë‹¹ `2RTT+file transmission time`ê°€ ì†Œìš”ë˜ê³  100ê°œë¼ë©´ 200RTTê°€ ì†Œìš”

âœ… ê·¸ë˜ì„œ HTTP1.1 ë²„ì „ì—ì„œëŠ” persistent HTTPë¥¼ ì§€ì›!
* ì„œë²„ê°€ Responseë¥¼ ë³´ë‚¸ í›„ì—ë„ **TCP ì»¤ë„¥ì…˜ì„ ìœ ì§€**
* ì»¤ë„¥ì…˜ ì—°ê²°ì— 1 RTT, ì—¬ëŸ¬ ì˜¤ë¸Œì íŠ¸ë“¤ì„ ì „ì†¡í•˜ëŠ”ë° ì•½ 1RTT
* ì—¬ëŸ¬ê°œì˜ ì˜¤ë¸Œì íŠ¸ë“¤ì„ ë³´ë‚¸ë‹¤í•´ë„ 2RTT + aì˜ ì‹œê°„ì´ ê±¸ë¦°ë‹¤.

![alt text](../assets/img/Computer_Network/EX_RTT.png)
![alt text](../assets/img/Computer_Network/EX_RTT_Solve.png)

#### HTTP request/response Message
---
* **request message**
![alt text](../assets/img/Computer_Network/HTTP_request.png)
> ë§¨ ìœ—ì¤„ì— `GET /index.html HTTP/1.1\r\n`
* `HEAD`: í…ŒìŠ¤íŠ¸ ëª©ì ìœ¼ë¡œ, ë³¸ë¬¸ì„ ë°›ì„ í•„ìš”ê°€ ì—†ì„ ë•Œ ì‚¬ìš©
* `GET`: **ì¡°íšŒìš© ë©”ì„œë“œ**. íŒŒë¼ë¯¸í„°ë¥¼ URLì— `?`ë¡œ ì—°ê²°í•˜ì—¬ ë³´ë‚¸ë‹¤.
* `POST`: **ì„œë²„ì— ì²˜ë¦¬ë¥¼ ìš”ì²­í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ** 
* `PUT`: File Uploadë¥¼ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©

* **response message**
![alt text](../assets/img/Computer_Network/HTTP_response.png)
> data data data...: data, e.g. http request file
  * response status codes:
    * `200`: ok
    * `300`: Moved Permanently
    * `400`: Bad Request
    * `404`: Not Found
    * `505`: HTTP Version Not Supported

#### Cookies
---
**<span style="color: #008000">cookie</span>**: HTTPì˜ `stateless`ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•¨
* **cookieì˜ four components**:
  1. cookie header line of HTTP response message
  2. cookie header line in next HTTP request message
  3. ì‚¬ìš©ì ë¸Œë¼ìš°ì €ì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” ì‚¬ìš©ì í˜¸ìŠ¤íŠ¸ì— ì €ì¥ëœ ì¿ í‚¤ íŒŒì¼
  4. back-end database at Web site

![alt text](../assets/img/Computer_Network/Cookies.png)

### Web cache
---
**<span style="color: #008000">Web cache</span>**: ì¸í„°ë„·ì—ì„œ ìì£¼ ì ‘ê·¼í•˜ëŠ” ì›¹ í˜ì´ì§€ë‚˜ ì½˜í…ì¸ ë¥¼ **ì„ì‹œë¡œ ì €ì¥í•´ë‘ëŠ” ì‹œìŠ¤í…œ**
![alt text](../assets/img/Computer_Network/Web_cache.png)
* "ì¤‘ê°„ ì €ì¥ì†Œ"ë¡œ ì‘ë™
* **í´ë¼ì´ì–¸íŠ¸ì™€ ì›ë³¸ ì„œë²„ ì‚¬ì´ì—ì„œ ë°ì´í„°ë¥¼ ì „ë‹¬**

* **operation of Web cache:**
1. **ì‚¬ìš©ì ì„¤ì •**: user configures browser **to point to a (local) Web cache**
2. **ìš”ì²­ ì „ë‹¬**: browser **sends all HTTP requests to cache**
3. **ìºì‹œ í™•ì¸:**
  * `if object in cache`: cache returns object to client
  * `else`: cache **requests object from origin server**, caches received object, then returns object to client

clientê°€ requestí•˜ë©´ serverê°€ ì•„ë‹Œ web í”„ë¡ì‹œ(web cache)ì—ì„œ responseí•˜ë©° httpë¥¼ requestë°›ì„ë•Œ procxy(web cache)ì— ì •ë³´ê°€ ì—†ìœ¼ë©´ serverì—ì„œ í”„ë¡ì‹œë¡œ ë°›ì•„ì˜¤ê³  ë‹¤ì‹œ clientí•œí…Œ response. ê·¸ ë‹´ ìš”ì²­ì—ëŠ” procxyì— ì €ì¥ë˜ì–´ ìˆëŠ” ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë°”ë¡œ responseí•¨

* Web cacheëŠ” **server/client ì—­í• ì„ ë™ì‹œ**ì— ìˆ˜í–‰í•¨.
![alt text](../assets/img/Computer_Network/server_client.png)
* ë˜í•œ origin serverëŠ” response headerì— ìºì‹± ì •ì±…ì„ ëª…ì‹œ ê°€ëŠ¥
  * `Cache-Control: max-age=<seconds>`: í•´ë‹¹ ì‹œê°„(ì´ˆ) ë™ì•ˆ ìºì‹± í—ˆìš©
  * `Cache-Control: no-cache`: ìºì‹± ê¸ˆì§€

âœ…Web Cachingì´ ì™œ í•„ìš”í•œê°€?  
1. `reduce response time`: cache is closer to client
2. `reduce traffic` on an institutionâ€™s access link
3. **Internet is dense with caches**: ì¸í„°ë„·ì—ëŠ” ë§ì€ ìºì‹œê°€ ë¶„ì‚°ë˜ì–´ ìˆì–´ íš¨ìœ¨ì ì¸ ì½˜í…ì¸  ì „ë‹¬ì´ ê°€ëŠ¥
4. `enables â€œpoorâ€ content providers` to **more effectively deliver content**

* web caching ì‹œë‚˜ë¦¬ì˜¤
![alt text](../assets/img/Computer_Network/Web_cache_ex1.png)
> **access link ì‚¬ìš©ë¥ : 97% â†’ í° ëŒ€ê¸°ì—´ ì§€ì—°**  

* ì†”ë£¨ì…˜:
1. **buy a faster access link**
![alt text](../assets/img/Computer_Network/Web_cache_ex2.png)
> access link: 1.54 Mbps â†’ 154 Mbps (100ë°° ì¦ê°€)  
> access link ì‚¬ìš©ë¥ : 0.97 â†’ 0.0097 (97% â†’ 0.97%)  
> end-end time = 2ì´ˆ + ë°€ë¦¬ì´ˆ + ë§ˆì´í¬ë¡œì´ˆ
* ì´ ë°©ë²•ì€ íš¨ê³¼ì ì´ì§€ë§Œ **ë¹„ìš©ì´ ë§ì´ ë“œëŠ” í•´ê²°ì±…**

2. **install a web cache**
![alt text](../assets/img/Computer_Network/Web_cache_ex3.png)
> `cache hit rate`ê°€ 40%ì¸ ê²½ìš°
> **40%ì˜ ìš”ì²­ì€ ìºì‹œì—ì„œ ë‚®ì€ ì§€ì—° ì‹œê°„(ë°€ë¦¬ì´ˆ)ìœ¼ë¡œ ì²˜ë¦¬**  
> **60%ì˜ ìš”ì²­ì€ ì—¬ì „íˆ ì›ë³¸ ì„œë²„ì—ì„œ ì²˜ë¦¬**  
> í‰ê·  ì§€ì—° ì‹œê°„ = 0.6 * (ì›ë³¸ ì„œë²„ì—ì„œì˜ ì§€ì—°) + 0.4 * (ìºì‹œì—ì„œì˜ ì§€ì—°)  
> = 0.6 * (2.01ì´ˆ) + 0.4 * (ë°€ë¦¬ì´ˆ) â‰ˆ 1.2ì´ˆ

### Conditional GET
---
ğŸ“š**<span style="color: #008000">Conditional GET</span>**: clientì˜ cacheì— ì´ë¯¸ ìµœì‹  ë²„ì „ì˜ ê°ì²´ê°€ ìˆë‹¤ë©´, ì„œë²„ê°€ ê°ì²´ë¥¼ ë‹¤ì‹œ ë³´ë‚´ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒ

![alt text](../assets/img/Computer_Network/Conditional_get.png)
âœ…**ì‘ë™ ë°©ì‹:**
1. `Client`: HTTP ìš”ì²­ì— `If-modified-since: <date>` í—¤ë”ë¥¼ í¬í•¨í•˜ì—¬ **ìì‹ ì´ ê°€ì§„ ìºì‹œëœ ë²„ì „ì˜ ë‚ ì§œë¥¼ ëª…ì‹œ**
2. `Server`: 
  * ìš”ì²­ë°›ì€ ê°ì²´ê°€ **ë‚ ì§œ ì´í›„ë¡œ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´** â†’ `HTTP/1.0 304 Not Modified` ì‘ë‹µ (ê°ì²´ ë°ì´í„° ì—†ìŒ)
  * ìš”ì²­ë°›ì€ ê°ì²´ê°€ **ë‚ ì§œ ì´í›„ë¡œ ë³€ê²½ë˜ì—ˆë‹¤ë©´** â†’ `HTTP/1.0 200 OK` ì‘ë‹µê³¼ í•¨ê»˜ **ìƒˆë¡œìš´ ê°ì²´ ë°ì´í„° ì „ì†¡**

### HTTP1.1, 2, 3
---
ğŸ’» **HTTP/1.1**  
  * **Pipelining**: ë‹¨ì¼ TCP ì—°ê²°ì—ì„œ ì—¬ëŸ¬ GET ìš”ì²­ì„ ìˆœì°¨ì ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆìŒ
  * **FCFS(First-Come-First-Served) Scheduling**: ì„œë²„ëŠ” ìš”ì²­ ë°›ì€ ìˆœì„œëŒ€ë¡œ ì‘ë‹µ
  * **HOL(Head-of-Line) ë¸”ë¡œí‚¹ ë¬¸ì œ ë°œìƒ**:
    * í° ê°ì²´ ë’¤ì— ì‘ì€ ê°ì²´ê°€ ëŒ€ê¸°í•´ì•¼ í•˜ëŠ” ìƒí™© ë°œìƒ
    * TCP íŒ¨í‚· ì†ì‹¤ ì‹œ ëª¨ë“  ê°ì²´ ì „ì†¡ì´ ì§€ì—°

ğŸ’» **HTTP/2**  
  * HTTP/1.1ê³¼ í˜¸í™˜ì„± ìœ ì§€
  * **Priority Scheduling**: í´ë¼ì´ì–¸íŠ¸ê°€ ì§€ì •í•œ **ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì „ì†¡ ìˆœì„œ ê²°ì •**
  * **Server Push**: **í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•˜ì§€ ì•Šì€ ê°ì²´ë„ ì„œë²„ê°€ ë¯¸ë¦¬ ì „ì†¡ ê°€ëŠ¥**
  * **í”„ë ˆì„ ë¶„í•  ë° interleaving**: ê°ì²´ë¥¼ ì‘ì€ í”„ë ˆì„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì „ì†¡í•˜ì—¬ HOL ë¸”ë¡œí‚¹ ì™„í™”
    * ê°ì²´ë¥¼ ì‘ì€ í”„ë ˆì„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ interleaving ë°©ì‹ìœ¼ë¡œ ì „ì†¡
    * **í° ê°ì²´(ì˜ˆ: ë¹„ë””ì˜¤ íŒŒì¼)ê°€ ì „ì†¡ë˜ëŠ” ë„ì¤‘ì—ë„ ì‘ì€ ê°ì²´(ì˜ˆ: CSS, JS íŒŒì¼)ë“¤ì´ í•¨ê»˜ ì „ì†¡ê°€ëŠ¥** â†’ HOL ë¸”ë¡œí‚¹ ë¬¸ì œë¥¼ í¬ê²Œ ì™„í™”
![alt text](../assets/img/Computer_Network/HTTP1_1_2.png)
* HTTP/2 í•œê³„
  * ë‹¨ì¼ TCP ì—°ê²°ì— ì˜ì¡´ â†’ **íŒ¨í‚· ì†ì‹¤ ë°œìƒ ì‹œ ëª¨ë“  ê°ì²´ ì „ì†¡ì´ ì§€ì—°**
  * TCP ì—°ê²° ìì²´ì—ëŠ” **ê¸°ë³¸ì ì¸ ë³´ì•ˆ ë©”ì»¤ë‹ˆì¦˜ì´ ì—†ìŒ**

ğŸ’» **HTTP/3**  
* **UDP ê¸°ë°˜**ì˜ `QUIC protocol` ì‚¬ìš©
* **í–¥ìƒëœ ë³´ì•ˆ**: ê¸°ë³¸ì ìœ¼ë¡œ ì•”í˜¸í™” ì œê³µ
* **ê°ì²´ë³„ ì˜¤ë¥˜ ë° í˜¼ì¡ ì œì–´**: í•˜ë‚˜ì˜ ê°ì²´ ì „ì†¡ ë¬¸ì œê°€ ë‹¤ë¥¸ ê°ì²´ ì „ì†¡ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŒ
* **more pipelining**: ë³‘ë ¬ ì²˜ë¦¬ ê¸°ëŠ¥ í–¥ìƒ

### E-mail, SMTP
---
E-mailì˜ 3ê°€ì§€ êµ¬ì„±ìš”ì†Œ
1. **user agent**
2. **mail servers**
3. <span style="color: #008000">SMTP(simple mail transfer protocol)</span>

* **user agent:**
  * a.k.a. â€œmail readerâ€
  * outgoing, incoming messages stored on server
* **mail servers**:
  * **mailbox**: contains incoming messages for user
  * **message queue** of outgoing (to be sent) mail messages

![alt text](SMTP.png)
**<span style="color: #008000">SMTP</span>** between mail servers to send email messages  
* **client**: sending mail server
* **server**: receiving mail server

![alt text](SMTP_ex.png)