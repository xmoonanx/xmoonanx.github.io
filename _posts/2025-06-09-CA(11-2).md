---
title: "[CA] Chapter 11: Exploiting Memory Hierarchy(2) - Direct Mapped Cache"

categories: [CS, Computer Architecture, CA, Assembly language]
tags:
  - [CS, c, cpp, Computer Architecture, CA, Assembly language, binary code]
toc: true
toc_sticky: true

date: 2025-06-09
last_modified_at: 2025-06-09
---
âš™ **Computer Architecture ê³µë¶€**

## Direct Mapped Cache - Index
---
![alt text](../assets/img/Architecture/DMCindex.png)

ğŸ“š**<span style="color: #008000">Index</span>**: cache block number  
    = (Memory Addr) mod (Number of Cache Blocks) (ë‚˜ë¨¸ì§€ ê°’)
* ìºì‹œ ë¸”ë¡ ìˆ˜ê°€ 8ê°œ(2Â³)ë¼ë©´, ë©”ëª¨ë¦¬ ì£¼ì†Œì˜ **í•˜ìœ„ 3ë¹„íŠ¸ê°€ ì¸ë±ìŠ¤**
  * ì˜ˆ: ì£¼ì†Œ `00001`, `01001`, `10001`, `11001ì€` ëª¨ë‘ ì¸ë±ìŠ¤ `001`(1ë²ˆ)ì— ë§¤í•‘

## Direct Mapped Cache - Tag
---
![alt text](../assets/img/Architecture/DMCTag.png)

{:.prompt-warning}
> ê°™ì€ ìºì‹œ ë¸”ë¡ì— ì—¬ëŸ¬ ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ë§¤í•‘ëœë‹¤ë©´?
>

* ì˜ˆ: 00001, 01001, 10001, 11001 ëª¨ë‘ ìºì‹œ ë¸”ë¡ 1ë²ˆì— ë§¤í•‘  
â†’ ìºì‹œì— ìˆëŠ” ë°ì´í„°ê°€ ì–´ë–¤ ë©”ëª¨ë¦¬ ì£¼ì†Œì˜ ê²ƒì¸ì§€ ì•Œ ìˆ˜ ì—†ìŒ!

{:.prompt-tip}
> ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ Tagì™€ Indexë¡œ ë‚˜ëˆˆë‹¤!!

ğŸ“š**<span style="color: #008000">Tag</span>**: ê°™ì€ ìºì‹œ ë¸”ë¡ì— ë§¤í•‘ë˜ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì£¼ì†Œë“¤ì„ êµ¬ë³„í•˜ëŠ” ì—­í• 

* ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ **Tag(ìƒìœ„ ë¹„íŠ¸)ì™€ Index(í•˜ìœ„ ë¹„íŠ¸)ë¡œ ë¶„í• **
![alt text](../assets/img/Architecture/DMCTagex.png)

* **Valid bit**ëŠ” í•´ë‹¹ ìºì‹œ ë¸”ë¡ì— ìœ íš¨í•œ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í‘œì‹œ

* í”„ë¡œì„¸ì„œ ì‹œì‘ ì‹œ ìºì‹œëŠ” ë¹ˆ ìƒíƒœ
* ìºì‹œ ë¸”ë¡ì´ ë¹„ì–´ìˆëŠ”ì§€, ìœ íš¨í•œ ë°ì´í„°ê°€ ìˆëŠ”ì§€ êµ¬ë³„ í•„ìš”
* `Valid bit = 0`: **ë¹„ì–´ìˆìŒ** ë˜ëŠ” ë¬´íš¨í•œ ë°ì´í„°
* `Valid bit = 1`: **ìœ íš¨í•œ ë°ì´í„° ì¡´ì¬**, íƒœê·¸ ë¹„êµ í•„ìš”

âœ…**data ê²€ìƒ‰ ê³¼ì •**:  
![alt text](../assets/img/Architecture/DMCTagex1.png)

### Cache ì ‘ê·¼ ì‹œë‚˜ë¦¬ì˜¤
---
##### ì´ˆê¸° ìƒíƒœ
![alt text](../assets/img/Architecture/acdmc1.png)

* ëª¨ë“  Cache blockì˜ `Valid bit = N` (ë¬´íš¨)
* Tagì™€ DataëŠ” ë¹„ì–´ìˆìŒ
* 8 blocks (Index 000~111)

##### Step 1: Data 22 (10110) request
![alt text](../assets/img/Architecture/acdmc2.png)

âœ…**ì²˜ë¦¬ ê³¼ì •**:  
1. index `110` â†’ ìºì‹œ ë¸”ë¡ **6ë²ˆ** í™•ì¸
2. `Valid bit = N` â†’ ë¬´íš¨í•œ ë°ì´í„°
3. **Cache Miss**! ë©”ëª¨ë¦¬ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
1. ë¸”ë¡ 6ì— ì €ì¥: `Valid=Y`, `Tag=10`, `Data=Memory(10110)`


##### Step 2: Data 26 (11010) request
![alt text](../assets/img/Architecture/acdmc3.png)

âœ…**ì²˜ë¦¬ ê³¼ì •**:  
1. index `010` â†’ ìºì‹œ ë¸”ë¡ **2ë²ˆ** í™•ì¸
2. `Valid bit = N` â†’ ë¬´íš¨í•œ ë°ì´í„°
3. **Cache Miss**! ë©”ëª¨ë¦¬ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
4. ë¸”ë¡ 2ì— ì €ì¥: `Valid=Y`, `Tag=11`, `Data=Memory(11010)`

##### Step 3: Data 22 (10110) request again
âœ…**ì²˜ë¦¬ ê³¼ì •**:  
1. index `110` â†’ ìºì‹œ ë¸”ë¡ **6ë²ˆ** í™•ì¸
2. `Valid bit = Y` â†’ **ìœ íš¨í•œ ë°ì´í„° ìˆìŒ**
3. **Tag ë¹„êµ**: ì €ì¥ëœ íƒœê·¸(10) = ìš”ì²­í•œ íƒœê·¸(10) âœ“
4. **Cache Hit**! ìºì‹œì—ì„œ ë°ì´í„° ì§ì ‘ ë°˜í™˜

##### Step 4: Data 26 (11010) request again
âœ…**ì²˜ë¦¬ ê³¼ì •**:  
1. index `010` â†’ ìºì‹œ ë¸”ë¡ **2ë²ˆ** í™•ì¸
2. `Valid bit = Y` â†’ **ìœ íš¨í•œ ë°ì´í„° ìˆìŒ**
3. **Tag ë¹„êµ**: ì €ì¥ëœ íƒœê·¸(11) = ìš”ì²­í•œ íƒœê·¸(11) âœ“
4. **Cache Hit**! ìºì‹œì—ì„œ ë°ì´í„° ì§ì ‘ ë°˜í™˜

### Cache Conflict
![alt text](../assets/img/Architecture/acdmcfin.png)

âŒ**ë°ì´í„° êµì²´ ë°œìƒ!**  
* `Step f`: ì£¼ì†Œ 18 (10010)ì„ ë¡œë“œí•  ë•Œ, Index `010`ì˜ ê¸°ì¡´ ë°ì´í„° (ì£¼ì†Œ 26ì˜ ë°ì´í„°)ê°€ êµì²´ë¨!
* ì£¼ì†Œ 26ì„ ë‹¤ì‹œ ìš”ì²­í•˜ë©´ ìºì‹œ ë¯¸ìŠ¤ ë°œìƒ

{:.prompt-warning}
> ìì£¼ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ë“¤ì´ ê°™ì€ ì¸ë±ìŠ¤ì— ë§¤í•‘ë˜ë©´ ì§€ì†ì ì¸ ë°ì´í„° êµì²´ë¡œ ì¸í•´ ìºì‹œ ì„±ëŠ¥ì´ í¬ê²Œ ì €í•˜ë¨!