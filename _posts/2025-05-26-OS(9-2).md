---
title: "[OS] Operating System(9-2): Main Memory - Paging"

categories: [CS, Operating System, OS]
tags:
  - [CS, OS, Operating System, Scheduling]
toc: true
toc_sticky: true
use_math: true

date: 2025-05-26
last_modified_at: 2025-05-26
---
>ğŸ€ ìš´ì˜ì²´ì œ ì „ê³µ ìˆ˜ì—… ì •ë¦¬

ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•  ë•Œ í•„ìš”í•œ ë©”ëª¨ë¦¬ë¥¼ ì„ì˜ë¡œ í• ë‹¹í•˜ê³  freeì‹œí‚¤ë©´ ì—¬ëŸ¬ê°€ì§€ë¥¼ í•œë‹¤

{:.prompt-tip}
> ê´€ë¦¬ë¥¼ ì‰½ê²Œ í•˜ë ¤ë©´ ë©”ì¸ ë©”ëª¨ë¦¬ë¥¼ ë™ì¼í•œ ê·œê²©ìœ¼ë¡œ ì˜ë¼ë†“ê³  ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤!
>

## Paging(â­)
---
ğŸ“š**<span style="color: #008000">Paging</span>**: Main memoryë¥¼ ë™ì¼í•œ ê·œê²©ìœ¼ë¡œ ì˜ë¼ì„œ ê·¸ ë‹¨ìœ„ë¡œ í• ë‹¹í•˜ê³  ê´€ë¦¬í•œë‹¤
![alt text](../assets/img/OS/pagingex.png)

* **frames**: ë¬¼ë¦¬ ë©”ëª¨ë¦¬ë¥¼ ê³ ì • í¬ê¸°ë¡œ ë‚˜ëˆˆ ë¸”ë¡ 
* **pages**: ë…¼ë¦¬ ë©”ëª¨ë¦¬ë¥¼ frameê³¼ ê°™ì€ í¬í‚¤ë¡œ ë‚˜ëˆˆ ë¸”ë¡
* **page table**: ë¬¼ë¦¬ì ì¸ ì£¼ì†Œë¥¼ ë…¼ë¦¬ì ì¸ ì£¼ì†Œë¡œ ë°”ê¾¸ê¸° ìœ„í•œ ë§¤í•‘ table

### Address Translation Scheme
---
page ë‹¨ìœ„ë¡œ ìë¥¸ ì£¼ì†Œë¥¼ ë³´ë©´ ìœ„ì¹˜ì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê²¨ìˆë‹¤

* **Page Number**: ë…¼ë¦¬ ì£¼ì†Œì˜ ìƒìœ„ ë¹„íŠ¸, page tableì˜ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©
* **offset**: ë…¼ë¦¬ ì£¼ì†Œì˜ í•˜ìœ„ ë¹„íŠ¸, page/frame ë‚´ì—ì„œì˜ ìœ„ì¹˜

![alt text](../assets/img/OS/Translation_Scheme.png)
> logical address êµ¬ì¡°  
> page size(offset) = $2^n$  
> page number = $2^(m-n)$ 

ì „ì²´ê°€ ë©”ëª¨ë¦¬ ì£¼ì†Œì´ê³  ë§Œì•½ page sizeê°€ 4KBë¼ë©´ ê·¸ page ë‚´ì— ìœ„ì¹˜ë¥¼ í‘œì‹œí•˜ë ¤ë©´ 12bitsê°€ í•„ìš”í•¨
ê·¸ëŸ¼ 32-bit ì‹œìŠ¤í…œì˜ ê²½ìš° page number = 32 - 12(page offset) = 20bitsê°€ ëœë‹¤

`ë¬¼ë¦¬ì£¼ì†Œ = (í˜ì´ì§€í…Œì´ë¸”[p] Ã— 2^n) + d`

### Paging Hardware(â­)
![alt text](../assets/img/OS/Paging_Hardware.png)

`p|d` ì˜ ë¬¼ë¦¬ì  ê³µê°„ì€ `f|d`ì´ê³  frame `f`ì— ì €ì¥ëœë‹¤
ì´ê±¸ í•˜ê¸°ìœ„í•´ **<span style="color: #008000">page table</span>**ì´ í•„ìš”í•˜ë‹¤

ë˜í•œ **ëª¨ë“  í”„ë¡œì„¸ìŠ¤ëŠ” ê°ì page tableì„ ê°€ì§€ê³  ìˆë‹¤**

* **Paging Model**:
![alt text](../assets/img/OS/Paging_Hardwareex.png)

í•œ í”„ë¡œì„¸ìŠ¤ê°€ 4ê°œì˜ pageë¥¼ ì“°ê³  ìˆë‹¤
ê° pageê°€ page tableì„ í†µí•´ ë…¼ë¦¬ì ì¸ ì£¼ì†Œì—ì„œ ë¬¼ë¦¬ì ì¸ ì£¼ì†Œë¡œ ë§¤ì¹­ëœë‹¤

âœ…**ë™ì‘ ê³¼ì •**:  
1. CPUê°€ ë…¼ë¦¬ ì£¼ì†Œë¥¼ ìƒì„±í•˜ë©´, ì´ë¥¼ í˜ì´ì§€ ë²ˆí˜¸(p)ì™€ ì˜¤í”„ì…‹(d)ìœ¼ë¡œ ë¶„í• 
2. í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ í…Œì´ë¸”ì—ì„œ í•´ë‹¹í•˜ëŠ” í”„ë ˆì„ ë²ˆí˜¸ë¥¼ ì°¾ìŒ
3. ì°¾ì€ í”„ë ˆì„ ë²ˆí˜¸ì™€ ì›ë˜ ì˜¤í”„ì…‹ì„ ê²°í•©í•˜ì—¬ ë¬¼ë¦¬ ì£¼ì†Œ ìƒì„±
4. ìƒì„±ëœ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ë©”ëª¨ë¦¬ì— ì „ì†¡í•˜ì—¬ ì‹¤ì œ ë°ì´í„°ì— ì ‘ê·¼

#### Paging Example
![alt text](../assets/img/OS/Paging_Hardwareex1.png)
> ë¬¼ë¦¬ì£¼ì†ŒëŠ” ë…¼ë¦¬ì£¼ì†Œë³´ë‹¤ ì»¤ë„ ìƒê´€X

* ë…¼ë¦¬ ì£¼ì†Œ 4bits = 16ê°€ì§€ ì£¼ì†Œ ê°’ í‘œí˜„ ê°€ëŠ¥(ê° ì£¼ì†Œê°€ 1byteë¥¼ ê°€ë¦¬í‚´)
* page size: 4bytes

#### Pageing- Internal Fragmentation ê³„ì‚°

```
Page size = 2,048 bytes (2KB)
Process size = 72,766 bytes

72,766 / 2,048 = 35.52..
â†’ 36ê°œ page í•„ìš”

ë‚˜ë¨¸ì§€ = 72,766 - 35pages(71,680) = 1,086 bytes(ë§ˆì§€ë§‰ 1,086ë§Œ ì”€)
â†’ 2,048 - 1,086 = 962 bytesë¥¼ ì•ˆì”€!
```

* **Worst case fragmenation** = 1 frame - 1 bytes
* **Average fragmentation** = 1/2 frame size

frame sizeë¥¼ ì‘ê²Œ í• ìˆ˜ë¡ **page table entryê°€ ì¦ê°€**
ê°€ì¥ ì¸ê¸°ìˆëŠ” page sizeëŠ” 4KB and 8KB

{:.prompt-tip}
> page tableì—ëŠ” frame ê°’ ì´ì™¸ì—ë„ ì¶”ê°€ ì •ë³´ë¥¼ ì €ì¥í•  ê³µê°„ì´ ì¶©ë¶„í•´ì•¼í•¨
>

##### Free frames
![alt text](../assets/img/OS/Free_frames.png)
> í”„ë ˆì„ í• ë‹¹ ê³¼ì •

* ìƒˆ í”„ë¡œì„¸ìŠ¤ê°€ 4ê°œ pageë¥¼ í•„ìš”
* í• ë‹¹ í›„ì— free frameì´ 15 ë°–ì— ì•ˆë‚¨ìŒ

### Implementation of Page Table
---
* **<span style="color: #008000">Page-table base register (PTBR)</span>**: page tableì˜ ì‹œì‘ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” ë ˆì§€ìŠ¤í„°
* **<span style="color: #008000">Page-table length register (PTLR)</span>**: page tableì˜ sizeë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë ˆì§€ìŠ¤í„°

âŒë©”ëª¨ë¦¬ ì ‘ê·¼ ë¬¸ì œì :  
* ëª¨ë“  data/instruction accessë¥¼ ìš”ì²­í•˜ë©´ **ìµœì†Œ 2ë²ˆì˜ ë©”ëª¨ë¦¬ ì¡°íšŒê°€ ì¼ì–´ë‚œë‹¤**
  1. page tableì— ì ‘ê·¼í•˜ì—¬ ë¬¼ë¦¬ ì£¼ì†Œ ë³€í™˜ ì •ë³´ íšë“
  2. ì‹¤ì œ data/instruction ì ‘ê·¼

ê·¸ê±¸ í•´ê²°í•˜ê¸° ìœ„í•´ **Translation look-aside buffers(TBLs)**ì´ ìˆë‹¤

#### Translation look-aside buffers(TBLs)
---
ğŸ“š**<span style="color: #008000">Translation look-aside buffers(TBLs)</span>**: ìµœì†Œ ë‘ë²ˆì˜ ë©”ëª¨ë¦¬ ì¡°íšŒì˜ ì‹œê°„ì„ ì¤„ì´ê¸° ìœ„í•´ ë¹ ë¥´ê²Œ ì¡°íšŒí•˜ê¸° ìœ„í•œ **cache**
* **ìµœê·¼ì— ì‚¬ìš©ëœ í˜ì´ì§€ ë³€í™˜ ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ì €ì¥í•¨**
* â†’ í˜ì´ì§€ í…Œì´ë¸”ì— ë‹¤ì‹œ ì ‘ê·¼í•  í•„ìš” X, ì¦‰ì‹œ physical address íšë“ ê°€ëŠ¥

âœ…**íŠ¹ì§•**:  
1. **ASID(Address Space Identifier)**
* ê° í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹ë³„í•˜ëŠ” ê³ ìœ  ID
* í”„ë¡œì„¸ìŠ¤ ê°„ ì£¼ì†Œ ê³µê°„ ë³´í˜¸ ì œê³µ
* ASIDê°€ ì—†ìœ¼ë©´ **context switch ë•Œë§ˆë‹¤ TLBë¥¼ ëª¨ë‘ ë¹„ì›Œì•¼ í•¨ (`flush`)**

2. **TLB í¬ê¸°ì™€ ì„±ëŠ¥**
* ì¼ë°˜ì ìœ¼ë¡œ 64~1024ê°œì˜ ì—”íŠ¸ë¦¬
* **ì‘ì§€ë§Œ ë§¤ìš° ë¹ ë¥¸ ì ‘ê·¼ ì†ë„**
* Intel Core i7 ì˜ˆì‹œ: `L1 instruction TLB(128ê°œ) + L1 data TLB(64ê°œ) + L2 TLB(512ê°œ)` - **ê³„ì¸µ êµ¬ì¡°**ë¥¼ ê°€ì§€ê¸°ë„ í•¨

3. **Replacement Policy**
* **TLBê°€ ê°€ë“ ì°° ë•Œ** ì–´ë–¤ entryë¥¼ ì œê±°í• ì§€ ê²°ì •
* `LRU`, `FIFO`, `Random` ë“±ì˜ ì •ì±… ì‚¬ìš©
* ì¼ë¶€ ì—”íŠ¸ë¦¬ëŠ” "<span style="color: #008000">wired down</span>" ê°€ëŠ¥ (ì˜êµ¬ ë³´ì¡´)

##### TLB hardware
* **Associative Memory (ì—°ê´€ ë©”ëª¨ë¦¬) - ë³‘ë ¬ ê²€ìƒ‰ ê°€ëŠ¥**
![alt text](../assets/img/OS/TLBhardware.png)

* ëª¨ë“  ì—”íŠ¸ë¦¬ë¥¼ ë™ì‹œì— ê²€ìƒ‰
* í˜ì´ì§€ ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ëŠ” ì—”íŠ¸ë¦¬ë¥¼ ì¦‰ì‹œ ì°¾ì•„ëƒ„

![alt text](../assets/img/OS/TLBhardwarepage.png)

* **TLB Hit**: ë©”ëª¨ë¦¬ ì ‘ê·¼ 1íšŒ(ë§¤ìš° ë¹ ë¦„)
* **TLB Miss**: ë©”ëª¨ë¦¬ ì ‘ê·¼ 2íšŒ(ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¼)

### Effective Access Time(EAT)
---
ğŸ“š**<span style="color: #008000">Effective Access Time(EAT)</span>**: TLBì˜ ì ì¤‘ë¥ ì„ ê³ ë ¤í•œ ì‹¤ì œ í‰ê·  ë©”ëª¨ë¦¬ ì ‘ê·¼ ì‹œê°„

ğŸ“**EAT ê³„ì‚° ê³µì‹**

```
EAT = (Hit Rate Ã— Hit Time) + (Miss Rate Ã— Miss Time)
```

`80% hit ratio`ì˜ ì‹œìŠ¤í…œì´ ë©”ëª¨ë¦¬ ì ‘ê·¼ì´ `10ns`ê°€ ê±¸ë¦°ë‹¤ ê°€ì •:
* Hit ì‹œê°„: `10ns`
* Miss ì‹œê°„: `20ns`
* ì ì¤‘ë¥ : `80%`
* **EAT = 0.80 x 10 + 0.20 x 20 = 12ns**
* ì„±ëŠ¥ ì €í•˜ 20%

* ë§Œì•½ ê³ ì„±ëŠ¥ ì‹œìŠ¤í…œì´ë¼ `99% hit ratio`ë¼ë©´
* * **EAT = 0.99 x 10 + 0.01 x 20 = 10.1ns**
* ì¦‰, ì„±ëŠ¥ ì €í•˜ê°€ 1%ì— ë¶ˆê³¼í•¨

### Memory Protection
---
ğŸ“š**<span style="color: #008000">Memory Protection</span>**: í”„ë¡œì„¸ìŠ¤ê°€ í—ˆìš©ë˜ì§€ ì•Šì€ ë©”ëª¨ë¦¬ ì˜ì—­ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ë°©ì§€

* **protection bit**ë¥¼ ì´ìš©í•¨!
1. `read-only`
2. `read-wirte`
3. `execute-only` ë“±ì´ ìˆìŒ

* page tableì—ì„œ ì—”íŠ¸ë¦¬ ì¡´ì¬ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œ **<span style="color: #008000">Valid/Invalid bit ë˜ëŠ” page-table length register(PTLR)</span>** ì´ìš©!
  
* `1(valid)`: í˜ì´ì§€ê°€ í”„ë¡œì„¸ìŠ¤ì˜ ì£¼ì†Œ ê³µê°„ì— ì†í•¨
* `0(invalid)`: í• ë‹¹ë˜ì§€ ì•Šì€ ë©”ëª¨ë¦¬ ì˜ì—­

![alt text](../assets/img/OS/vivspltr.png)

![alt text](../assets/img/OS/Invalid_bit.png)

### Shared Pages
---
ğŸ“š**Shared Pages**: **reentrant(ì¬ì§„ì… ê°€ëŠ¥) code**, ì½ê¸° ì „ìš©ìœ¼ë¡œ ì„¤ì •, ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œ ì‚¬ìš© ê°€ëŠ¥  
(ex: text editors, compilers, shared libraries)

* **ê°œë³„ ì½”ë“œ ë° ë°ì´í„°(shared data)**:ê° í”„ë¡œì„¸ìŠ¤ë³„ ë…ë¦½ì ì¸ ì‚¬ë³¸, read-write ê°€ëŠ¥ (ex: ì „ì—­ ë³€ìˆ˜, ì •ì  ë³€ìˆ˜)

âœ…**Reentrancyì˜ ì¤‘ìš”ì„±:**  

```c
// âŒ ì¬ì§„ì… ë¶ˆê°€ëŠ¥í•œ í•¨ìˆ˜ (ì „ì—­ ë³€ìˆ˜ ì‚¬ìš©)
static int counter = 0;
int bad_function() {
    counter++;  // ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œ í˜¸ì¶œ ì‹œ ë¬¸ì œ!
    return counter;
}

// âœ… ì¬ì§„ì… ê°€ëŠ¥í•œ í•¨ìˆ˜ (ì§€ì—­ ë³€ìˆ˜ë§Œ ì‚¬ìš©)
int good_function(int input) {
    int local_var = input * 2;  // ì•ˆì „í•¨
    return local_var;
}
```

![alt text](../assets/img/OS/Shared_Pagesex.png)

## Structure of the Page Table
---
ìš°ë¦¬ê°€ ìœ„ì—ì„œ ì•Œì•„ë³¸ page tableì—ëŠ” ë¬¸ì œê°€ ìˆë‹¤.

**32-bit ì‹œìŠ¤í…œì—ì„œ 4KB í˜ì´ì§€ë¥¼ ì‚¬ìš©**í•œë‹¤ ê°€ì •:
* **ì „ì²´ ì£¼ì†Œ ê³µê°„**: %2^32% = 4GB
* **í˜ì´ì§€ í¬ê¸°**: 4KB = 2Â¹Â²
* **ì´ í˜ì´ì§€ ìˆ˜**: 2Â³Â²/2Â¹Â² = 2Â²â° = 1,048,576ê°œ
* **í˜ì´ì§€ í…Œì´ë¸” ì—”íŠ¸ë¦¬**: ê° 4bytes
* **í˜ì´ì§€ í…Œì´ë¸” í¬ê¸°**: 4 Ã— 2Â²â° = 4MB

âŒë¬¸ì œì :  
* í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ **4MBì˜ ì—°ì†ëœ ë©”ëª¨ë¦¬ê°€ í˜ì´ì§€ í…Œì´ë¸”ìš©ìœ¼ë¡œ í•„ìš”**
* í•˜ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ í”„ë¡œì„¸ìŠ¤ëŠ” ì „ì²´ ì£¼ì†Œ ê³µê°„ì„ ì‚¬ìš© X(ì¦‰, ê³µê°„ë‚­ë¹„)
* ë©”ëª¨ë¦¬ ë¶€ì¡± ìƒí™©ì—ì„œëŠ” í° ë¶€ë‹´

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²• 3ê°€ì§€:  
1. **<span style="color: #008000">Hierarchical Paging</span>**
2. **<span style="color: #008000">Hashed Page Tables</span>**
3. **<span style="color: #008000">Inverted Page Tables</span>**

### Hierarchical Paging
---
ğŸ“š**<span style="color: #008000">Hierarchical Paging</span>**: page tableì„ paging í•˜ëŠ” ê²ƒ!

![alt text](Hierarchical_Paging.png)

#### Two-Level Paging Example
---
4KB page sizeì˜ 32-bit ì‹œìŠ¤í…œì—ì„œ ë…¼ë¦¬ ì£¼ì†Œì˜ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŒ:
* ì „ì²´ ì£¼ì†Œ ê³µê°„: 2^32 bytes(4GB)
* **page number** = 20-bits â†’ 2^20 ê°œ
* **page offset(í˜ì´ì§€ í¬ê¸°)** = 4KB (12-bits â†’ 2^12bytes)

* page number, ì¦‰ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë‚˜ëˆ”:

```
32-bit logical address = [10bits][10bits][12bits]
                           pâ‚       pâ‚‚      d
```

* `pâ‚` (10bits): **Outer Page Table** ì¸ë±ìŠ¤
* `pâ‚‚` (10bits): **Inner Page Table** ë‚´ì—ì„œì˜ **ì˜¤í”„ì…‹**
* `d` (12bits): í˜ì´ì§€ ë‚´ ì˜¤í”„ì…‹

![alt text](Address_Translation_Scheme.png)

âœ…**ë³€í™˜ ê³¼ì •**:  
1. pâ‚ìœ¼ë¡œ Outer Page Tableì—ì„œ Inner Page Table ì£¼ì†Œ ì°¾ê¸°
2. pâ‚‚ë¡œ Inner Page Tableì—ì„œ ë¬¼ë¦¬ í”„ë ˆì„ ë²ˆí˜¸ ì°¾ê¸°
3. í”„ë ˆì„ ë²ˆí˜¸ + dë¡œ ìµœì¢… ë¬¼ë¦¬ ì£¼ì†Œ ìƒì„±

#### Three level Paging Example
---
4KB page sizeì˜ 64-bit ì‹œìŠ¤í…œì—ì„œ ë…¼ë¦¬ ì£¼ì†Œì˜ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŒ:
* ì „ì²´ ì£¼ì†Œ ê³µê°„: 2^64 bytes
* **page offset**: 4KB = `2^12bytes`
* **page number**: 2^64 / 2^12 = `2^52`ê°œ í˜ì´ì§€
* **page table entry**: `8 bytes` (64-bit í¬ì¸í„°)
* **page table size**: 2^52 x 8 = 2^55 bytes = `32 Petabytes`  
â†’ **í”„ë¡œì„¸ìŠ¤ë‹¹ 32PBì˜ í˜ì´ì§€ í…Œì´ë¸” í•„ìš”!(í˜„ì‹¤ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥)**

##### 2-level ì‹œë„
![alt text](../assets/img/OS/twolevel3v.png)

* `pâ‚` (Outer Page): 42bits
* `pâ‚‚` (Inner Page): 10bits
* `d` (Offset): 12bits
* **Outer page table size**: 2^42 x 8 = 2^45 = `32TB`
* ì—¬ì „íˆ ë„ˆë¬´ í¼!

##### 3-level í•´ê²°ì±…
![alt text](../assets/img/OS/thrlevel3v.png)

* `pâ‚` (2nd Outer): 32bits
* `pâ‚‚` (Outer): 10bits
* `pâ‚ƒ` (Inner): 10bits
* `d` (Offset): 12bits
* **2nd Outer Page Table**: 2^32 Ã— 8 bytes = 2^35 bytes = 32GB
* í•˜ì§€ë§Œ ì—¬ì „íˆ 32GBëŠ” í¬ê³  **ë©”ëª¨ë¦¬ ì ‘ê·¼ íšŸìˆ˜ë„ 4íšŒ**ë¡œ ì¦ê°€í•¨

**intel**ì€ 9bitsì”© 4ê³„ì¸µìœ¼ë¡œ ë‚˜ëˆ ì„œ 64bit ì¤‘ **36bit + offset 12bit**ë§Œ ì‚¬ìš©í•œë‹¤

```
- 64ë¹„íŠ¸ ì¤‘ 48ë¹„íŠ¸ë§Œ ì‚¬ìš©
- ê°€ìƒ ì£¼ì†Œ ê³µê°„: 2^48 = 256TB (ì¶©ë¶„íˆ í¼)
- 4-Level í˜ì´ì§• ì‚¬ìš©

48-bit êµ¬ì¡°: [9][9][9][9][12]
PML4 â†’ PDP â†’ PD â†’ PT â†’ Offset
ê° ë ˆë²¨ë‹¹ 512ê°œ ì—”íŠ¸ë¦¬ (2^9)
```

### Hashed Page Table
---
ğŸ“š**<span style="color: #008000">Hashed Page Table</span>**: ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì—ì„œ **ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë¬¼ë¦¬ì  í”„ë ˆì„ ë²ˆí˜¸ë¡œ ë³€í™˜**
* ì¼ë°˜ì ìœ¼ë¡œ **32bitë³´ë‹¤ í° ì£¼ì†Œ ê³µê°„**ì—ì„œ ì‚¬ìš©ë¨

âœ…**ì‘ë™ì›ë¦¬:**  
1. **hash í•¨ìˆ˜ ì‚¬ìš©**: ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ í•´ì‹œ í•¨ìˆ˜ h(p)ì— ì…ë ¥í•˜ì—¬ í•´ì‹œ í…Œì´ë¸”ì˜ ì¸ë±ìŠ¤ë¥¼ ê³„ì‚°
2. **chain êµ¬ì¡°**: ê°™ì€ í•´ì‹œ ê°’ì„ ê°–ëŠ” ì—¬ëŸ¬ í˜ì´ì§€ë“¤ì€ ì²´ì¸ í˜•íƒœë¡œ ì €ì¥ë¨
3. ê° ì—”íŠ¸ë¦¬ëŠ” 3ê°€ì§€ ì •ë³´ë¥¼ í¬í•¨:
   1. **Virtual Page Number**
   2. **Physical Frame Number**
   3. **ë‹¤ìŒ ì—”íŠ¸ë¦¬ë¥¼ ê°€ë¦¬í‚¤ëŠ” Pointer**

![alt text](../assets/img/OS/hashed_table.png)

âœ…**ì‘ë™ ê³¼ì •**:  
1. **í•´ì‹± ê³¼ì •**: ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸(Virtual Page Number)ë¥¼ í•´ì‹œ í•¨ìˆ˜(`h(p)`)ì— ì…ë ¥ â†’ hash tableì˜ ì¸ë±ìŠ¤ ê³„ì‚°
2. **ì²´ì¸ ê²€ìƒ‰**: í•´ì‹œëœ ìœ„ì¹˜ì—ì„œ ì—°ê²° ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ì €ì¥ëœ ì—”íŠ¸ë¦¬ë“¤ì„ ìˆœì°¨ ê²€ìƒ‰
3. **ë§¤ì¹­**: ì°¾ëŠ” ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ” ì—”íŠ¸ë¦¬ ë°œê²¬ ì‹œ ë¬¼ë¦¬ í”„ë ˆì„ ë²ˆí˜¸ ë°˜í™˜ â†’ ë¬¼ë¦¬ ì£¼ì†Œ ìƒì„±

* page number = hash function
* h(p)ê°€ hash tableì— ë§¤ì¹­ì´ ë˜ëŠ”ì§€ í™•ì¸í•¨
* ìœ„ ì˜ˆì‹œì—ì„œëŠ” pì™€ qëŠ” ê°™ì€ hash tableì— ì¡´ì¬í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ

* **<span style="color: #008000">Clustered Page Tables</span>**
  * 64-bit systemì—ì„œëŠ” ê° ì—”íŠ¸ë¦¬ê°€ ì—¬ëŸ¬ í˜ì´ì§€(ì˜ˆ: 16ê°œ)ë¥¼ ì°¸ì¡°í•˜ëŠ” **Clustered Page Tables**ë¥¼ ì‚¬ìš©í•¨
  * **sparse address space**(ë©”ëª¨ë¦¬ ì°¸ì¡°ê°€ ë¶ˆì—°ì†ì ì´ê³  ì‚°ì¬ëœ ê²½ìš°)ì—ì„œ ë§¤ìš° ìœ ìš©

### Inverted page table
---
ì¼ë°˜ì ìœ¼ë¡œ page tableì€ ê°ê°ì˜ í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ê°€ì§€ê³  ìˆëŠ”ë° ê·¸ëŸ¬ë‹¤ ë³´ë©´ **page tableì´ frame tableë³´ë‹¤ ë§ê²Œ ëœë‹¤**

ê·¸ë˜ì„œ frame tableì„ ê´€ë¦¬í•˜ìëŠ” ì·¨ì§€ì˜ tableì´ Inverted page table

ğŸ“š**<span style="color: #008000">Inverted Page Table</span>**:
* ì‹œìŠ¤í…œ ì „ì²´ì— ë‹¨ í•˜ë‚˜ì˜ í…Œì´ë¸”ë§Œ ì¡´ì¬
* ë¬¼ë¦¬ì  í˜ì´ì§€ë“¤ì„ ì¶”ì  (ë…¼ë¦¬ í˜ì´ì§€ê°€ ì•„ë‹Œ!)
* ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ í¬ê¸°ì—ë§Œ ë¹„ë¡€

* í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ í˜ì´ì§€ í…Œì´ë¸”ì„ ê°€ì§€ì§€ ë§ê³  ë¬¼ë¦¬ì  í˜ì´ì§€ë¥¼ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” ë°©ë²•`
![alt text](../assets/img/OS/Inverted_page_table.png)


* **hash table í™œìš©**
  * `(PID, p)`ë¥¼ í•´ì‹œ í•¨ìˆ˜ì— ì…ë ¥í•˜ì—¬ ê²€ìƒ‰ ë²”ìœ„ë¥¼ 1ê°œ ë˜ëŠ” ëª‡ ê°œì˜ ì—”íŠ¸ë¦¬ë¡œ ì œí•œ
  * âœ” **TLB**ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë”ìš± ë¹ ë¥¸ ì ‘ê·¼ ê°€ëŠ¥

âŒ **ê³µìœ ë©”ëª¨ë¦¬ êµ¬í˜„ì´ ì–´ë µë‹¤**  
â†’ í•˜ë‚˜ì˜ ë¬¼ë¦¬ì  ì£¼ì†Œì— í•˜ë‚˜ì˜ ê°€ìƒë©”ëª¨ë¦¬ ì£¼ì†Œë§Œ ë§¤í•‘ë˜ê¸° ë•Œë¬¸ì—
![alt text](../assets/img/OS/Inverted_page.png)

![alt text](../assets/img/OS/Inverted_page_tablec.png)

* ëˆ„êµ¬ì˜ pageì¸ì§€ë¥¼ ì•Œê¸° ìœ„í•´ `pid` ì •ë³´ë„ ê°™ì´ ë“¤ì–´ê°„ë‹¤
  * ì¦‰, ì–´ë–¤ í”„ë¡œì„¸ìŠ¤(pid)ì˜ í˜ì´ì§€(p)ê°€ ië²ˆì§¸ í”„ë ˆì„ì— í• ë‹¹ ë˜ì–´ìˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤

* ê·¸ë˜ì„œ í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ pageë¥¼ ê°€ì§€ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— **ë©”ëª¨ë¦¬ê°€ ì¤„ì–´ë“ ë‹¤**