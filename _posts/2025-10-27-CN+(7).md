---
title: "[πCN] DHCP - Dynamic Host Configuration Protocol"

categories: [CS, Internet Protocol]
tags:
  - [CS, Internet Protocol, Computer Networking, Application layer, DHCP, Dynamic IP, BOOTP, Relay, Lease Management]
toc: true
toc_sticky: true

date: 2025-10-27
last_modified_at: 2025-10-27
---
>π Internet Protocol μ „κ³µ μμ—… μ •λ¦¬

*λ„¤νΈμ›ν¬μ μλ™ν™”λ¥Ό μ‹¤ν„ν•λ” ν•µμ‹¬ ν”„λ΅ν† μ½! DHCPλ” IP μ£Όμ†λ¥Ό λ™μ μΌλ΅ ν• λ‹Ήν•κ³  λ„¤νΈμ›ν¬ μ„¤μ •μ„ μλ™ν™”ν•μ—¬ μ‚¬μ©μκ°€ λ„¤νΈμ›ν¬μ— μ‰½κ² μ ‘μ†ν•  μ μκ² ν•΄μ£Όλ” ν•„μμ μΈ ν”„λ΅ν† μ½μ΄λ‹¤.*

-----

## **IP μ£Όμ† ν• λ‹Ήμ μ—­μ‚¬**

### κ³Όκ±°μ λ°©λ²•λ“¤

**1990λ…„λ€ μ΄ - Diskless Workstation μ‹λ€**

π“**<span style="color: #008000">Diskless Workstation</span>**: μ €μ¥μ¥μΉ μ—†μ΄ λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ OSλ¥Ό λ¶€ν…ν•λ” μ‹μ¤ν…

**λ¬Έμ μ :**
- μ „μ›μ΄ κΊΌμ§€λ©΄ OS imageκΉμ§€ μ‚¬λΌμ§
- λ¶€ν… μ‹ OS imageλ¥Ό λ¶€νΈ μ„λ²„μ—μ„ κ°€μ Έμ™€μ•Ό ν•¨
- λ¶€νΈ μ„λ²„μ™€μ λ„¤νΈμ›ν‚Ήμ„ μ„ν•΄ IP μ£Όμ† ν•„μ”

### RARP (Reverse ARP)

**ν•κ³„μ :**
- λ‹¨μν• IP μ£Όμ† ν• λ‹Ήλ§ κ°€λ¥
- μ¶”κ°€ λ„¤νΈμ›ν¬ μ •λ³΄ μ κ³µ λ¶κ°€λ¥
- ν™•μ¥μ„± λ¶€μ΅±

### BOOTP (BOOTstrap Protocol)

π“**<span style="color: #008000">BOOTP</span>**: λ¶€ν… μ‹ νΈμ¤νΈμ IP λ§¤κ°λ³€μλ¥Ό κµ¬μ„±ν•  μ μλ” ν”„λ΅ν† μ½

**μ£Όμ” κΈ°λ¥:**
1. **IP address assignment** (IP μ£Όμ† ν• λ‹Ή)
2. **Detection of the IP address for a serving machine** (μ„λΉ„μ¤ λ¨Έμ‹ μ IP μ£Όμ† κ°μ§€)
3. **The name of a file to be loaded and executed** (λ¶€νΈ νμΌ μ΄λ¦„ μ κ³µ)

**νΉμ§•:**
- IP μ£Όμ†λΏλ§ μ•„λ‹λΌ default router, network mask λ“±λ„ μ κ³µ
- BOOTP relayλ΅ ν•λ‚μ BOOTP μ„λ²„κ°€ μ—¬λ¬ λ„¤νΈμ›ν¬ μ²λ¦¬ κ°€λ¥
- UDP λ©”μ‹μ§€ μ‚¬μ© (Port 67: server, Port 68: client)
- Limited broadcast address (255.255.255.255) μ‚¬μ©
- **μ •μ  IP μ£Όμ† ν• λ‹Ή**

### Dynamic Assignmentμ ν•„μ”μ„±

π“**<span style="color: #008000">Dynamic IP Assignment</span>**: μ”κµ¬μ— λ”°λΌ IP μ£Όμ†λ¥Ό λ™μ μΌλ΅ ν• λ‹Ήν•λ” λ°©μ‹

**μ¥μ :**
- **On-demand IP assignment**: ν•„μ”ν•  λ•λ§ IP μ£Όμ† ν• λ‹Ή
- **Manual configuration νν”Ό**: μλ™ μ„¤μ •μ λ²κ±°λ΅μ›€ ν•΄κ²°
- **Laptop mobility μ§€μ›**: μ΄λ™μ„± μλ” λ””λ°”μ΄μ¤ μ§€μ›

**ν”„λ΅ν† μ½ λ°μ „:**
- **RARP** (until 1985, λ” μ΄μƒ μ‚¬μ©ν•μ§€ μ•μ)
- **BOOTP** (1985-1993)
- **DHCP** (since 1993) β† **ν„μ¬ λ„λ¦¬ μ‚¬μ©**

-----

## **DHCP κ°μ”**

### DHCPμ νƒ„μƒ

π“**<span style="color: #008000">DHCP (Dynamic Host Configuration Protocol)</span>**: 1993λ…„μ— μ„¤κ³„λ λ™μ  νΈμ¤νΈ κµ¬μ„± ν”„λ΅ν† μ½

**DHCP = BOOTP + Ξ±**
- BOOTPμ ν™•μ¥
- BOOTPμ™€ λ§μ€ μ μ‚¬μ 
- λ™μΌν• ν¬νΈ λ²νΈ μ‚¬μ© (67, 68)
- BOOTP ν΄λΌμ΄μ–ΈνΈμ™€ μƒνΈ μ΄μ© κ°€λ¥

**ν•µμ‹¬ ν™•μ¥ κΈ°λ¥:**
1. **Temporary allocation ("leases")**: IP μ£Όμ†μ μ„μ‹ ν• λ‹Ή (λ¦¬μ¤)
2. **Complete IP configuration**: λ¨λ“  IP κµ¬μ„± λ§¤κ°λ³€μ νλ“ κ°€λ¥

### DHCPμ νΉμ§•

**λ™μ  IP μ£Όμ† κ΄€λ¦¬:**
- IP μ£Όμ† ν’€μ—μ„ μ‚¬μ© κ°€λ¥ν• μ£Όμ† μλ™ ν• λ‹Ή
- μ„μ‹ ν• λ‹Ή(lease)μ„ ν†µν• ν¨μ¨μ  IP μ£Όμ† κ΄€λ¦¬
- λ¦¬μ¤ λ§λ£ μ‹ μλ™ κ°±μ‹  λλ” ν•΄μ 

**ν¬κ΄„μ  λ„¤νΈμ›ν¬ μ„¤μ •:**
- IP μ£Όμ†, μ„λΈλ„· λ§μ¤ν¬
- Default gateway (λΌμ°ν„°)
- DNS μ„λ²„ μ£Όμ†
- κΈ°νƒ€ 200μ—¬ κ°μ λ„¤νΈμ›ν¬ λ§¤κ°λ³€μ

-----

## **DHCP λ©”μ‹μ§€ κµ¬μ΅°**

### DHCP Header Format

```
 0                   15 16                  31
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚      OpCode           β”‚   Hardware Type      β”‚
β”‚     (8 bits)          β”‚     (8 bits)         β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ Hardware Address      β”‚      Hop Count       β”‚
β”‚ Length (8 bits)       β”‚     (8 bits)         β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚           Number of Seconds (16 bits)        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ Unused (BOOTP) /        β”‚   Transaction ID   β”‚
β”‚ Flags (DHCP)            β”‚     (16 bits)      β”‚
β”‚    (16 bits)            β”‚                    β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚            Client IP address (32 bits)       β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚             Your IP address (32 bits)        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚            Server IP address (32 bits)       β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚           Gateway IP address (32 bits)       β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚      Client hardware address (16 bytes)      β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚           Server host name (64 bytes)        β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚           Boot file name (128 bytes)         β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚               Options (variable)              β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### μ£Όμ” ν•„λ“ μ„¤λ…

**1. OpCode (8 bits)**
- 1 (Request): ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„
- 2 (Reply): μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ

**2. Hardware Type (8 bits)**
- 1 (Ethernet)

**3. Hardware Address Length (8 bits)**
- 6 (Ethernet MAC μ£Όμ† κΈΈμ΄)

**4. Hop Count (8 bits)**
- ν΄λΌμ΄μ–ΈνΈκ°€ 0μΌλ΅ μ„¤μ •
- Relay agentκ°€ hop μ μ¶”μ 

**5. Transaction ID (16 bits)**
- Requestμ™€ Response λ§¤μΉ­μ„ μ„ν• μ •μ

**6. Flags (16 bits)**
- B (1bit, broadcast): λΈλ΅λ“μΊμ¤νΈ μ”μ²­

**7. IP Address Fields**
- **Client IP address**: IP μ”μ²­ μ‹ 0.0.0.0, ν• λ‹Ή ν›„ μ‚¬μ©ν•  IP
- **Your IP address**: ν΄λΌμ΄μ–ΈνΈμ—κ² ν• λ‹Ήν•λ” IP μ£Όμ†
- **Server IP address**: DHCP μ„λ²„ μ΄ν›„ μ°Ύμ•„κ° μ„λ²„ μ£Όμ†
- **Gateway IP address**: Relayμ IP μ£Όμ†

-----

## **DHCP λ©”μ‹μ§€ νƒ€μ…**

### DHCP Option 53: Message Type

| Value | Message Type   | μ„¤λ…                    |
| ----- | -------------- | ----------------------- |
| 1     | DHCPDISCOVER   | ν΄λΌμ΄μ–ΈνΈμ μ„λ²„ λ°κ²¬  |
| 2     | DHCPOFFER      | μ„λ²„μ IP μ£Όμ† μ μ•     |
| 3     | DHCPREQUEST    | ν΄λΌμ΄μ–ΈνΈμ IP μ”μ²­    |
| 4     | DHCPDECLINE    | ν΄λΌμ΄μ–ΈνΈμ IP κ±°μ     |
| 5     | DHCPACK        | μ„λ²„μ μΉμΈ             |
| 6     | DHCPNAK        | μ„λ²„μ κ±°λ¶€             |
| 7     | DHCPRELEASE    | ν΄λΌμ΄μ–ΈνΈμ IP ν•΄μ     |
| 8     | DHCPINFORM     | ν΄λΌμ΄μ–ΈνΈμ μ •λ³΄ μ”μ²­  |

### μ£Όμ” DHCP μµμ…λ“¤

**Option 50: Requested IP Address**
- μ΄μ „μ— μ‚¬μ©ν•λ IP μ£Όμ† μ”μ²­

**Option 51: IP Address Lease Time**
- IP μ£Όμ† μ„λ€ μ‹κ°„ (μ: 3600s = 1 hour)

**Option 53: DHCP Message Type** (ν•„μ)
- DHCP λ©”μ‹μ§€ μ ν• μ§€μ •

**Option 54: DHCP Server Identification**
- DHCP μ„λ²„ μ£Όμ† β†’ λ‹¤μμ—λ” λΈλ΅λ“μΊμ¤νΈκ°€ μ•„λ‹ μ§μ ‘ μ”μ²­

**Option 55: Parameter Request List**
- ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν•λ” λ„¤νΈμ›ν¬ λ§¤κ°λ³€μ λ©λ΅
- Subnet Mask, Router, DNS Server, Domain Name λ“±

-----

## **DHCP 4λ‹¨κ³„ ν”„λ΅μ„Έμ¤**

### DORA Process

π“**<span style="color: #008000">DORA</span>**: DHCPμ 4λ‹¨κ³„ ν”„λ΅μ„Έμ¤ (Discover, Offer, Request, Acknowledge)

```
Client                          Selected Server
  β”‚                                     β”‚
  β”‚  DISCOVER                           β”‚ Determines
  β”‚ (broadcast, xid, params request)    β”‚ Configuration
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ίβ”‚ (Other Servers
  β”‚                                     β”‚  May OFFER)
  β”‚  OFFER                              β”‚
  β”‚ (broadcast, siaddr, xid, yiaddr)    β”‚
  β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
  β”‚                                     β”‚
Collects Replies                        β”‚
Selects Server/Configuration            β”‚
  β”‚                                     β”‚
  β”‚  REQUEST                            β”‚ Selected Server
  β”‚ (broadcast, siaddr, ciaddr, xid)    β”‚ Commits Config
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ίβ”‚ (Other Servers
  β”‚                                     β”‚  Do Not)
  β”‚  ACK                                β”‚
  β”‚ (broadcast, xid, yiaddr, options)   β”‚
  β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
  β”‚                                     β”‚
Configured                              β”‚
```

### κ° λ‹¨κ³„λ³„ μƒμ„Έ

**1. DISCOVER (ν΄λΌμ΄μ–ΈνΈ β†’ λΈλ΅λ“μΊμ¤νΈ)**
- ν΄λΌμ΄μ–ΈνΈκ°€ DHCP μ„λ²„ μ°ΎκΈ°
- UDP Port 68 β†’ 67λ΅ λΈλ΅λ“μΊμ¤νΈ
- 0.0.0.0μ—μ„ 255.255.255.255λ΅ μ „μ†΅

**2. OFFER (μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ)**
- μ‚¬μ© κ°€λ¥ν• IP μ£Όμ† μ μ•
- Lease μ‹κ°„κ³Ό λ„¤νΈμ›ν¬ μ„¤μ • ν¬ν•¨
- μ—¬λ¬ μ„λ²„κ°€ μ‘λ‹µ κ°€λ¥

**3. REQUEST (ν΄λΌμ΄μ–ΈνΈ β†’ λΈλ΅λ“μΊμ¤νΈ)**
- νΉμ • μ„λ²„μ μ μ• μλ½
- μ„ νƒν• μ„λ²„ ID ν¬ν•¨
- μ—¬μ „ν λΈλ΅λ“μΊμ¤νΈ (λ‹¤λ¥Έ μ„λ²„λ“¤μ—κ² μ•λ¦Ό)

**4. ACK (μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ)**
- μµμΆ… μΉμΈ λ° μ„¤μ • μ •λ³΄ μ „μ†΅
- ν΄λΌμ΄μ–ΈνΈκ°€ IP μ£Όμ† μ‚¬μ© μ‹μ‘

-----

## **DHCP State Machine**

### ν΄λΌμ΄μ–ΈνΈ μƒνƒ μ „μ΄

```
                    Send
                  DISCOVER
        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”      β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
    β”€β”€β”€β–Ίβ”‚   INIT    β”‚β”€β”€β”€β”€β”€β–Ίβ”‚  Selecting  β”‚
        β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”      β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β–²                    β”‚ Collect
              β”‚                    β”‚ Offers
              β”‚                    β–Ό
     Recv NACKβ”‚              β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   (or Lease  β”‚              β”‚ Requesting  β”‚
    Expires)  β”‚              β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β”‚                    β”‚ Select Server
              β”‚                    β”‚ Send REQUEST
     β”β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”                 β–Ό
     β”‚ Rebinding  β”‚           β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” Recv ACK (Accept)
     β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”           β”‚    Bound    β”‚β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€
              β–²               β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         T2   β”‚                      β”‚ (Obtain T1, T2)
        Expiresβ”‚                     β”‚
              β”‚               β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β”‚          T1   β”‚  Renewing   β”‚
              β””β”€β”€β”€β”€β”€β”€β”€Expiresβ”€β”¤             β”‚
                              β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### μƒνƒλ³„ μ„¤λ…

**INIT**: μ΄κΈ° μƒνƒ, DISCOVER μ „μ†΅

**Selecting**: OFFER μμ§‘ μ¤‘

**Requesting**: νΉμ • μ„λ²„ μ„ νƒ ν›„ REQUEST μ „μ†΅

**Bound**: IP μ£Όμ† ν• λ‹Ή λ°›μ•„ μ‚¬μ© μ¤‘
- T1 (Renewal Time): λ¦¬μ¤ μ‹κ°„μ 50%
- T2 (Rebinding Time): λ¦¬μ¤ μ‹κ°„μ 87.5%

**Renewing**: T1 λ§λ£, λ™μΌ μ„λ²„μ— κ°±μ‹  μ”μ²­

**Rebinding**: T2 λ§λ£, λ¨λ“  μ„λ²„μ— κ°±μ‹  μ”μ²­

-----

## **DHCP Relay Agent**

### ν„λ€μ  DHCP κµ¬μ„±

π“**<span style="color: #008000">DHCP Relay</span>**: ν΄λΌμ΄μ–ΈνΈμ™€ μ›κ²© DHCP μ„λ²„ κ°„μ λ©”μ‹μ§€ μ¤‘κ³„

**ν•„μ”μ„±:**
- λΈλ΅λ“μΊμ¤νΈλ” λ΅μ»¬ λ„¤νΈμ›ν¬λ§ λ„λ‹¬
- κ° μ„λΈλ„·λ§λ‹¤ DHCP μ„λ²„ μ„¤μΉλ” λΉ„ν¨μ¨μ 
- μ¤‘μ•™ μ§‘μ¤‘μ‹ DHCP μ„λ²„ μ΄μ ν•„μ”

**λ™μ‘ λ°©μ‹:**
```
Network Segment A    β”‚    Network Segment B
                     β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”          β”‚         β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ Client  β”‚          β”‚         β”‚ DHCP Server β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”          β”‚         β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
     β”‚               β”‚                 β–²
     β”‚ Broadcast     β”‚                 β”‚
     β–Ό               β”‚                 β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”‚    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ Relay Agent   β”‚β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”‚ Unicast     β”‚
β”‚ (Router)      β”‚    β”‚    β”‚ Messages    β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”‚    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

**Relay Agent κΈ°λ¥:**
1. λΈλ΅λ“μΊμ¤νΈ DHCP λ©”μ‹μ§€ μμ‹ 
2. μ λ‹μΊμ¤νΈλ΅ DHCP μ„λ²„μ— μ „λ‹¬
3. μ„λ²„ μ‘λ‹µμ„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ¤‘κ³„
4. Gateway IP address ν•„λ“μ— μμ‹ μ IP κΈ°λ΅

-----

## **DHCP Lease Management**

### Lease μ‹κ°„ κ΄€λ¦¬

π“**<span style="color: #008000">IP Address Lease</span>**: IP μ£Όμ†μ μ„μ‹ μ‚¬μ©κ¶, μ§€μ •λ μ‹κ°„ λ™μ•λ§ μ ν¨

**Lease κ°±μ‹  κ³Όμ •:**

**λ¦¬μ¤ μ‹κ°„μ 50% κ²½κ³Ό (T1) μ‹:**
- ν΄λΌμ΄μ–ΈνΈκ°€ λ™μΌ μ„λ²„μ— DHCPREQUEST μ „μ†΅
- μ„λ²„ μ‘λ‹µ μ—†μΌλ©΄ μ”μ²­ λ°λ³µ
- μ„λ²„κ°€ DHCPNAK μ‘λ‹µ μ‹ μ²μλ¶€ν„° λ‹¤μ‹ μ‹μ‘

**λ¦¬μ¤ μ‹κ°„μ 87.5% κ²½κ³Ό (T2) μ‹:**
- λ¨λ“  DHCP μ„λ²„μ— λΈλ΅λ“μΊμ¤νΈ DHCPREQUEST
- μ–΄λ–¤ μ„λ²„λ“  μ‘λ‹µ κ°€λ¥

### Lease ν•΄μ 

**DHCPRELEASE:**
- ν΄λΌμ΄μ–ΈνΈκ°€ IP μ£Όμ† λ” μ΄μƒ μ‚¬μ©ν•μ§€ μ•μμ„ μ•λ¦Ό
- μ„λ²„κ°€ IP μ£Όμ†λ¥Ό ν’€μ— λ°ν™
- μ •μƒμ μΈ ν•΄μ  κ³Όμ •

**μλ™ λ§λ£:**
- ν΄λΌμ΄μ–ΈνΈκ°€ κ°±μ‹ ν•μ§€ μ•μΌλ©΄ μλ™μΌλ΅ λ§λ£
- μ„λ²„κ°€ IP μ£Όμ†λ¥Ό νμν•μ—¬ μ¬μ‚¬μ© κ°€λ¥

-----

## **DHCP μ”μ•½**

### DHCPμ ν•µμ‹¬ κΈ°λ¥

**1. λ™μ  IP μ£Όμ† κ΄€λ¦¬**
- μλ™ IP μ£Όμ† ν• λ‹Ή λ° νμ
- Lease κΈ°λ° μ„μ‹ ν• λ‹Ή
- IP μ£Όμ† ν’€μ ν¨μ¨μ  κ΄€λ¦¬

**2. ν¬κ΄„μ  λ„¤νΈμ›ν¬ μ„¤μ •**
- IP μ£Όμ†, μ„λΈλ„· λ§μ¤ν¬, κ²μ΄νΈμ›¨μ΄
- DNS μ„λ²„, λ„λ©”μΈ μ΄λ¦„
- 200μ—¬ κ°μ λ„¤νΈμ›ν¬ λ§¤κ°λ³€μ

**3. λ„¤νΈμ›ν¬ μλ™ν™”**
- Zero-configuration μ§€μ›
- μ‚¬μ©μ κ°μ… μµμ†ν™”
- μ¤‘μ•™ μ§‘μ¤‘μ‹ κ΄€λ¦¬

**4. ν™•μ¥μ„±κ³Ό μ΄λ™μ„±**
- Relay Agentλ¥Ό ν†µν• ν™•μ¥
- λ„¤νΈμ›ν¬ κ°„ μ΄λ™ μ§€μ›
- λ€κ·λ¨ λ„¤νΈμ›ν¬ κ΄€λ¦¬

### DHCP vs μ •μ  IP μ£Όμ†

| κµ¬λ¶„          | DHCP (λ™μ )           | Static IP (μ •μ )       |
| ------------- | --------------------- | ---------------------- |
| **κ΄€λ¦¬ νΈμ** | μλ™ν™”, μ¤‘μ•™ κ΄€λ¦¬     | μλ™ μ„¤μ • ν•„μ”         |
| **ν™•μ¥μ„±**    | λ€κ·λ¨ λ„¤νΈμ›ν¬ μ ν•©  | μ†κ·λ¨λ§ ν„μ‹¤μ         |
| **IP ν¨μ¨μ„±** | λ†’μ (ν•„μ”μ‹μ—λ§)     | λ‚®μ (ν•­μƒ μ μ )       |
| **μ΄λ™μ„±**    | μ™„λ²½ μ§€μ›             | μ ν•μ                  |
| **λ³΄μ•**      | μ¶”κ°€ κ³ λ ¤μ‚¬ν•­         | μƒλ€μ μΌλ΅ μ•μ „        |
| **μ•μ •μ„±**    | DHCP μ„λ²„μ— μμ΅΄      | λ†’μ                   |

{:.prompt-tip}
> **DHCPλ” ν„λ€ λ„¤νΈμ›ν¬μ κΈ°λ°**
> - κ±°μ λ¨λ“  λ„¤νΈμ›ν¬μ—μ„ μ‚¬μ©
> - μ‚¬μ©μ νΈμμ„±κ³Ό κ΄€λ¦¬ ν¨μ¨μ„± μ κ³µ
> - λ„¤νΈμ›ν¬ μλ™ν™”μ ν•µμ‹¬ κµ¬μ„± μ”μ†

-----

**References:**
- RFC 2131: Dynamic Host Configuration Protocol
- RFC 2132: DHCP Options and BOOTP Vendor Extensions
- RFC 3046: DHCP Relay Agent Information Option
- Prof. Jongwon Yoon, Intelligent Machines Lab.