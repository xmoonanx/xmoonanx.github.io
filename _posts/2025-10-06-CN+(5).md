---
title: "[ğŸŒCN] UDP - User Datagram Protocol"

categories: [CS, Internet Protocol]
tags:
  - [CS, Internet Protocol, Computer Networking, Transport layer, UDP, Port Numbers, Checksum, Multiplexing]
toc: true
toc_sticky: true

date: 2025-10-06
last_modified_at: 2025-10-06
---
>ğŸŒ Internet Protocol ì „ê³µ ìˆ˜ì—… ì •ë¦¬

*IP ê³„ì¸µì˜ Best Effort ì„œë¹„ìŠ¤ ìœ„ì— Transport Layerê°€ ë“±ì¥í•œë‹¤. UDPëŠ” ê°€ì¥ ë‹¨ìˆœí•œ ì „ì†¡ ê³„ì¸µ í”„ë¡œí† ì½œë¡œ, IPì— Multiplexing/Demultiplexing ê¸°ëŠ¥ë§Œ ì¶”ê°€í•œë‹¤. ë‹¨ìˆœí•¨ ì†ì— ìˆ¨ê²¨ì§„ ê°•ë ¥í•œ í™œìš© ì‚¬ë¡€ì™€ ì„¤ê³„ ì² í•™ì„ ì‚´í´ë³´ì.*

-----

## **Transport Layer ê°œìš”**

### TCP/IP ê³„ì¸µ êµ¬ì¡°ì—ì„œì˜ ìœ„ì¹˜

ğŸ“š**<span style="color: #008000">Transport Layer</span>**: Network Layer(IP) ìœ„ì—ì„œ ë™ì‘í•˜ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ ë°ì´í„° ì „ì†¡ì„ ë‹´ë‹¹í•˜ëŠ” ê³„ì¸µ

**í”„ë¡œí† ì½œ ìŠ¤íƒ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Application Layer                  â”‚
â”‚  Telnet  FTP  HTTP  DHCP  DNS  Ping     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Transport Layer                    â”‚  â—„â”€ ì—¬ê¸°!
â”‚         TCP          UDP                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Network Layer                      â”‚
â”‚    IP      ICMP      IGMP               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Link Layer                         â”‚
â”‚  ARP  Hardware Interface  RARP          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†•
            Media
```

### End-to-End Principle

ğŸ“š**<span style="color: #008000">End-to-End Principle</span>**: ê¸°ëŠ¥ ë°°ì¹˜ì˜ ì›ì¹™ - ì• í”Œë¦¬ì¼€ì´ì…˜ë³„ ê¸°ëŠ¥ì€ í†µì‹ ì˜ ì–‘ ëë‹¨(end nodes)ì—ë§Œ êµ¬í˜„

**í•µì‹¬ ì² í•™:**

```
                HOST                                HOST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Application       â”‚â—„Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·â–ºâ”‚     Application       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Transport         â”‚â—„Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·â–ºâ”‚     Transport         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Network          â”‚â—„â”€â”€â”€â”€â”€â”     â”‚      Network          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Data Link         â”‚â—„â”€â”€â”  â”‚  â”Œâ”€â–ºâ”‚     Data Link         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚  â”‚  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â–¼â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Intermediate      â”‚
                    â”‚     Routers         â”‚
                    â”‚  (Network + Link)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì„¤ê³„ ì›ì¹™:**
* âœ… **Application-specific features**: í†µì‹ í•˜ëŠ” End nodesì—ë§Œ êµ¬í˜„
* âœ… **Intermediate routers**: ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ë§Œ ë‹´ë‹¹ (Dumb minimal networks)
* âœ… **Smart terminals**: ëª¨ë“  ì§€ëŠ¥ì€ ì–‘ ëë‹¨ì—
* âœ… **Performance enhancement**: í˜¸ìŠ¤íŠ¸ê°€ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ë©´, í•˜ìœ„ ê³„ì¸µì—ëŠ” ì„±ëŠ¥ í–¥ìƒ ëª©ì ìœ¼ë¡œë§Œ êµ¬í˜„
* âŒ **No burden**: í•´ë‹¹ ê¸°ëŠ¥ì´ í•„ìš” ì—†ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¶€ë‹´ì„ ì£¼ì§€ ì•ŠìŒ

{:.prompt-info}
> **ì² í•™ì˜ í•µì‹¬**: "ê¸°ëŠ¥ì„ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¶€ë‹´ì„ ì£¼ì§€ ë§ˆë¼!"

-----

## **Transport Protocols: UDP vs TCP**

### ì¸í„°ë„·ì˜ 2ê°€ì§€ Transport Protocol

**ë¹„êµí‘œ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              UDP                    â”‚             TCP                 â”‚
â”‚   User Datagram Protocol            â”‚ Transmission Control Protocol   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Datagram oriented                â”‚ âœ… Stream oriented              â”‚
â”‚ âŒ Unreliable, Connectionless      â”‚ âœ… Reliable, Connection-orientedâ”‚
â”‚ âœ… Simple                           â”‚ âŒ Complex                      â”‚
â”‚ âœ… Unicast and Multicast            â”‚ âŒ Only Unicast                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UDPì˜ íŠ¹ì§• ë° ìš©ë„

**UDP íŠ¹ì§•:**
* **Datagram oriented**: ê° ë©”ì‹œì§€ê°€ ë…ë¦½ì 
* **Unreliable**: ì†ì‹¤, ì¤‘ë³µ, ìˆœì„œ ë°”ë€œ ê°€ëŠ¥
* **Connectionless**: ì—°ê²° ì„¤ì • ì—†ìŒ
* **Simple**: ìµœì†Œí•œì˜ ì˜¤ë²„í—¤ë“œ
* **Multicast ì§€ì›**: 1:N í†µì‹  ê°€ëŠ¥

**UDP ì£¼ìš” ì‚¬ìš©ì²˜:**

```
3ê°€ì§€ ì£¼ìš” ìš©ë„:
1. Non-unicast (Multicast/Broadcast)
2. Real-time (ì‹¤ì‹œê°„ í†µì‹ )
3. Short transactions (ì§§ì€ íŠ¸ëœì­ì…˜)
```

| ë¶„ë¥˜           | ì• í”Œë¦¬ì¼€ì´ì…˜                      | ì´ìœ                        |
| :------------- | :-------------------------------- | :------------------------- |
| **ì„œë¹„ìŠ¤**     | DNS, DHCP, SNMP, RIP              | ì§§ì€ ìš”ì²­/ì‘ë‹µ             |
| **ë©€í‹°ë¯¸ë””ì–´** | VoIP, í™”ìƒíšŒì˜, IPTV, ê²Œì„        | ì‹¤ì‹œê°„ì„± ì¤‘ìš”, ì§€ì—° ìµœì†Œí™” |
| **ë©€í‹°ìºìŠ¤íŠ¸** | Router discovery, Multicast video | 1:N í†µì‹                    |

### TCPì˜ íŠ¹ì§• ë° ìš©ë„

**TCP íŠ¹ì§•:**
* **Stream oriented**: ì—°ì†ëœ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼
* **Reliable**: ìˆœì„œ ë³´ì¥, ì†ì‹¤ ë³µêµ¬
* **Connection-oriented**: 3-way handshake
* **Complex**: íë¦„ ì œì–´, í˜¼ì¡ ì œì–´
* **Unicast only**: 1:1 í†µì‹ ë§Œ ê°€ëŠ¥

**TCP ì£¼ìš” ì‚¬ìš©ì²˜:**

| ì• í”Œë¦¬ì¼€ì´ì…˜ | í¬íŠ¸ | íŠ¹ì§•        |
| :----------- | :--- | :---------- |
| **HTTP**     | 80   | ì›¹ ë¸Œë¼ìš°ì§• |
| **SMTP**     | 25   | ì´ë©”ì¼ ì „ì†¡ |
| **FTP**      | 21   | íŒŒì¼ ì „ì†¡   |
| **Telnet**   | 23   | ì›ê²© í„°ë¯¸ë„ |

-----

## **UDPì˜ ì—­í• **

### UDPê°€ ì œê³µí•˜ëŠ” ê²ƒ

ğŸ“š**<span style="color: #008000">UDPì˜ í•µì‹¬ ê¸°ëŠ¥</span>**: IPì˜ host-to-host deliveryë¥¼ application-to-application deliveryë¡œ í™•ì¥

**UDPê°€ ì¶”ê°€í•˜ëŠ” ìœ ì¼í•œ ê¸°ëŠ¥:**

```
                Applications               Applications
                   â—‹ â—‹ â—‹                      â—‹ â—‹ â—‹
                   â”‚ â”‚ â”‚                      â”‚ â”‚ â”‚
                â”Œâ”€â”€â–¼â”€â–¼â”€â–¼â”€â”€â”€â”                â”Œâ”€â–¼â”€â–¼â”€â–¼â”€â”€â”
                â”‚   UDP    â”‚                â”‚  UDP   â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                     â”‚                           â”‚
                â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”
                â”‚    IP    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   IP   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

í•µì‹¬ ê¸°ëŠ¥: Multiplexing & Demultiplexing
```

**UDP = IP + Multiplexing/Demultiplexing**

* **Multiplexing (ì†¡ì‹  ì¸¡)**: ì—¬ëŸ¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°ì´í„°ë¥¼ IPë¡œ ì „ë‹¬
* **Demultiplexing (ìˆ˜ì‹  ì¸¡)**: IP íŒ¨í‚·ì„ ì˜¬ë°”ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „ë‹¬

**UDPê°€ ì œê³µí•˜ì§€ ì•ŠëŠ” ê²ƒ:**
* âŒ ì‹ ë¢°ì„± (Reliability)
* âŒ ìˆœì„œ ë³´ì¥ (Ordering)
* âŒ íë¦„ ì œì–´ (Flow Control)
* âŒ í˜¼ì¡ ì œì–´ (Congestion Control)
* âŒ ì—°ê²° ê´€ë¦¬ (Connection Management)

{:.prompt-warning}
> **Unreliable transmission**: UDPëŠ” datagramì˜ ì „ì†¡ë§Œ ì œê³µí•˜ë©°, ë‚®ì€ ì˜¤ë²„í—¤ë“œë¥¼ ìœ ì§€í•œë‹¤!

-----

## **UDP Header êµ¬ì¡°**

### UDP íŒ¨í‚· êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚IP header â”‚ UDP header â”‚      UDP data            â”‚
â”‚(20 bytes)â”‚  (8 bytes) â”‚      (variable)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UDP Header í¬ë§·

```
 0      7 8     15 16    23 24                    31
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Source Port     â”‚   Destination Port Number        â”‚
â”‚   Number        â”‚         (16 bits)                â”‚
â”‚  (16 bits)      â”‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UDP Message     â”‚       Checksum                   â”‚
â”‚   Length        â”‚       (16 bits)                  â”‚
â”‚  (16 bits)      â”‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚                  DATA                              â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•„ë“œ ì„¤ëª…:**

| í•„ë“œ                        | í¬ê¸°    | ì„¤ëª…                                       |
| :-------------------------- | :------ | :----------------------------------------- |
| **Source Port Number**      | 16 bits | ì†¡ì‹  ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹ë³„                     |
| **Destination Port Number** | 16 bits | ìˆ˜ì‹  ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹ë³„                     |
| **UDP Message Length**      | 16 bits | UDP í—¤ë” + ë°ì´í„° ì „ì²´ ê¸¸ì´                |
| **Checksum**                | 16 bits | ì˜¤ë¥˜ ê²€ì¶œ (IPv4ì—ì„œëŠ” ì„ íƒ, IPv6ì—ì„œ í•„ìˆ˜) |

### í—¤ë” í•„ë“œ ìƒì„¸

**Port Numbers (ê° 16 bits):**
* ì†¡ì‹ /ìˆ˜ì‹  ì• í”Œë¦¬ì¼€ì´ì…˜(í”„ë¡œì„¸ìŠ¤) ì‹ë³„
* **í”„ë¡œì„¸ìŠ¤ë¥¼ ì°¾ê¸° ìœ„í•´ í•„ìˆ˜**
* ICMP ì—ëŸ¬ê°€ ë°œìƒí•œ IP datagramì˜ ì²˜ìŒ ë¶€ë¶„ì„ í¬í•¨í•˜ì—¬ ì „ë‹¬
* ì—°ê²°(association)ì„ ì°¾ì„ ìˆ˜ ì—†ìœ¼ë©´ â†’ **ICMP Port Unreachable** ì—ëŸ¬ ë°˜í™˜

**UDP Message Length:**
* ìµœì†Œ: **8 bytes** (í—¤ë”ë§Œ, ë°ì´í„° í•„ë“œ ë¹„ì–´ìˆì„ ìˆ˜ ìˆìŒ)
* ìµœëŒ€: **65,535 bytes** (2^16 - 1)
* UDP í—¤ë” + UDP ë°ì´í„° í¬í•¨

**Checksum:**
* UDP í—¤ë”ì™€ UDP ë°ì´í„° ì „ì²´ë¥¼ ê²€ì¦
* **IPv4**: ì„ íƒ ì‚¬í•­ (0ì´ë©´ ì‚¬ìš© ì•ˆ í•¨)
* **IPv6**: í•„ìˆ˜ ì‚¬í•­
* ê³„ì‚° ë°©ë²•: One's complement arithmetic

-----

## **Port Numbers**

### Port Numberì˜ ì—­í• 

ğŸ“š**<span style="color: #008000">Port Number</span>**: Transport Layerì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜(í”„ë¡œì„¸ìŠ¤)ì„ ì‹ë³„í•˜ëŠ” 16ë¹„íŠ¸ ë²ˆí˜¸

**ì „ì—­ ê³ ìœ  ì£¼ì†Œ:**

```
Transport Layerì˜ ê¸€ë¡œë²Œ ì£¼ì†Œ = <IP address, Port number>

ì˜ˆì‹œ:
  192.168.1.100:80  â†’ ì›¹ ì„œë²„
  192.168.1.100:53  â†’ DNS ì„œë²„
  (ê°™ì€ IP, ë‹¤ë¥¸ í¬íŠ¸ â†’ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜)
```

**ë²”ìœ„:**
* ê° í˜¸ìŠ¤íŠ¸ë‹¹ **65,535ê°œ** UDP í¬íŠ¸ (2^16 - 1)
* TCPì™€ UDPëŠ” **ë…ë¦½ì ì¸ í¬íŠ¸ ê³µê°„** ì‚¬ìš©

### Multiplexing & Demultiplexing

**Demultiplexing ê³¼ì •:**

```
                    User Processes
             â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
             â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚
             â””â”€â–²â”€â”´â”€â–²â”€â”´â”€â–²â”€â”´â”€â”€â”€â”´â”€â–²â”€â”´â”€â–²â”€â”˜
               â”‚   â”‚   â”‚       â”‚   â”‚
               â”‚   â”‚   â”‚       â”‚   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚         Demultiplex              â”‚
        â”‚      based on Port Number        â”‚
        â”‚                                  â”‚
        â”‚      TCP            UDP          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         Demultiplex              â”‚
        â”‚   based on Protocol Field        â”‚
        â”‚          in IP Header            â”‚
        â”‚                                  â”‚
        â”‚             IP                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**2ë‹¨ê³„ Demultiplexing:**

1. **IP Layer**: Protocol fieldë¡œ TCP/UDP êµ¬ë¶„
2. **Transport Layer**: Port numberë¡œ í”„ë¡œì„¸ìŠ¤ êµ¬ë¶„

### Port Number ê´€ë¦¬ ì²´ê³„

ğŸ“š**<span style="color: #008000">IANA (Internet Assigned Numbers Authority)</span>**: í¬íŠ¸ ë²ˆí˜¸ë¥¼ ê´€ë¦¬í•˜ëŠ” ê¸€ë¡œë²Œ ê¸°ê´€

**í¬íŠ¸ ë²ˆí˜¸ ë²”ìœ„:**

| Range             | Category        | ì„¤ëª…                                   |
| :---------------- | :-------------- | :------------------------------------- |
| **1 - 1023**      | Well-known      | ì˜ ì•Œë ¤ì§„ ì„œë¹„ìŠ¤ (root ê¶Œí•œ í•„ìš”)      |
| **1024 - 4915**   | Registered      | ë“±ë¡ëœ ì• í”Œë¦¬ì¼€ì´ì…˜                    |
| **49152 - 65535** | Private/Dynamic | ì„ì‹œ í¬íŠ¸ (í´ë¼ì´ì–¸íŠ¸ê°€ ë™ì ìœ¼ë¡œ ì‚¬ìš©) |

**Well-known Ports ì˜ˆì‹œ:**

| Port | Service  | í”„ë¡œí† ì½œ | ì„¤ëª…             |
| :--- | :------- | :------- | :--------------- |
| 20   | FTP-DATA | TCP      | FTP ë°ì´í„°       |
| 21   | FTP      | TCP      | FTP ì œì–´         |
| 22   | SSH      | TCP      | Secure Shell     |
| 23   | Telnet   | TCP      | ì›ê²© í„°ë¯¸ë„      |
| 25   | SMTP     | TCP      | ë©”ì¼ ì „ì†¡        |
| 53   | **DNS**  | **UDP**  | ë„ë©”ì¸ ì´ë¦„ ì„œë²„ |
| 67   | DHCP     | UDP      | DHCP ì„œë²„        |
| 68   | DHCP     | UDP      | DHCP í´ë¼ì´ì–¸íŠ¸  |
| 80   | HTTP     | TCP      | ì›¹ ì„œë²„          |
| 161  | SNMP     | UDP      | ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬    |
| 443  | HTTPS    | TCP      | ë³´ì•ˆ ì›¹ ì„œë²„     |

### Tracerouteì™€ UDP

**Linux Tracerouteì˜ ë™ì‘:**

```
Linux tracerouteëŠ” UDPë¥¼ ì‚¬ìš©!

ë™ì‘ ê³¼ì •:
1. TTL=1ë¶€í„° ì‹œì‘í•˜ì—¬ UDP íŒ¨í‚· ì „ì†¡
2. Private port number ì‚¬ìš© (33434+)
3. ì¤‘ê°„ ë¼ìš°í„°ì—ì„œ TTL=0 â†’ ICMP Time Exceeded ì‘ë‹µ
4. ëª©ì ì§€ ë„ë‹¬ ì‹œ â†’ í•´ë‹¹ í¬íŠ¸ì— í”„ë¡œì„¸ìŠ¤ ì—†ìŒ
   â†’ ICMP Destination Unreachable (Port Unreachable) ì‘ë‹µ âœ…

ì´ë¥¼ í†µí•´ ëª©ì ì§€ ë„ë‹¬ì„ í™•ì¸!
```

**ì˜ˆì‹œ:**

```bash
$ traceroute www.example.com
...
12  * * *
13  203.0.113.1 (203.0.113.1)  50.123 ms
    â†’ ICMP: Port Unreachable (ëª©ì ì§€ ë„ë‹¬!)
```

### Port Numberì™€ í”„ë¡œì„¸ìŠ¤ ì„ íƒ

**ì „ì†¡ ê³¼ì •:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Host: 193.14.26.7             â”‚
â”‚  â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â”                    â”‚
â”‚  â”‚ ğŸ“„ â”‚  â”‚ ğŸ“„ â”‚  â”‚...â”‚  Processes        â”‚
â”‚  â””â”€â–²â”€â”˜  â””â”€â–²â”€â”˜  â””â”€â”€â”€â”˜                    â”‚
â”‚    â”‚      â”‚                              â”‚
â”‚    â”‚      â”‚     Port number              â”‚
â”‚  â”Œâ”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”  selects the              â”‚
â”‚  â”‚    13     â”‚  process                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚        â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   UDP header           â”‚              â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
â”‚  â”‚ â”‚Src Port â”‚Dest Port â”‚ â”‚              â”‚
â”‚  â”‚ â”‚         â”‚    13    â”‚ â”‚              â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚    IP header           â”‚              â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚  â”‚ â”‚ 193.14.26.7      â”‚   â”‚  IP address  â”‚
â”‚  â”‚ â”‚                  â”‚   â”‚  selects     â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  the host    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì£¼ì†Œ í•´ì„ ìˆœì„œ:**
1. **IP address**: ì–´ëŠ í˜¸ìŠ¤íŠ¸ì¸ê°€? â†’ 193.14.26.7
2. **Port number**: ì–´ëŠ í”„ë¡œì„¸ìŠ¤ì¸ê°€? â†’ 13ë²ˆ í¬íŠ¸

-----

## **UDP Checksum**

### Checksum ê³„ì‚° ê³¼ì •

ğŸ“š**<span style="color: #008000">UDP Checksum</span>**: UDP í—¤ë”ì™€ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ 16ë¹„íŠ¸ ê°’

**ê³„ì‚° ì ˆì°¨:**

```
1. Pseudo-header ì¶”ê°€
2. Checksum í•„ë“œë¥¼ 0ìœ¼ë¡œ ì±„ì›€
3. 16-bit wordsë¡œ ë¶„í•  (í•„ìš”ì‹œ padding ì¶”ê°€)
4. One's complement arithmeticìœ¼ë¡œ ëª¨ë“  words ë”í•˜ê¸°
5. ê²°ê³¼ë¥¼ complementí•˜ì—¬ checksum í•„ë“œì— ì €ì¥
6. Pseudo-headerì™€ padding ì œê±°
7. UDP segmentë¥¼ IPë¡œ ì „ë‹¬
```

### Pseudo-header êµ¬ì¡°

**ì™œ Pseudo-header?**

```
Pseudo-headerëŠ” IP í—¤ë”ì˜ ì¼ë¶€ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬
UDPê°€ ì˜¬ë°”ë¥¸ í˜¸ìŠ¤íŠ¸ì— ì „ë‹¬ë˜ì—ˆëŠ”ì§€ ê²€ì¦!
```

**Pseudo-header í¬ë§·:**

```
 0      7 8     15 16    23 24                    31
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          32-bit Source IP Address                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       32-bit Destination IP Address                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   All 0s       â”‚  8-bit Protocolâ”‚ 16-bit UDP       â”‚
â”‚   (padding)    â”‚     (17)       â”‚  Total Length    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Source Port     â”‚    Destination Port      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      UDP Total Length   â”‚       Checksum           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Data                           â”‚
â”‚  (Padding must be added to make data multiple      â”‚
â”‚   of 16 bits)                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pseudo-header í•„ë“œ:**

| í•„ë“œ                       | í¬ê¸°    | ê°’           |
| :------------------------- | :------ | :----------- |
| **Source IP Address**      | 32 bits | IP í—¤ë”ì—ì„œ  |
| **Destination IP Address** | 32 bits | IP í—¤ë”ì—ì„œ  |
| **Zero padding**           | 8 bits  | 0x00         |
| **Protocol**               | 8 bits  | 17 (UDP)     |
| **UDP Total Length**       | 16 bits | UDP í—¤ë”ì—ì„œ |

### Checksum ê³„ì‚° ì˜ˆì‹œ

**ì˜ˆì œ: ê°„ë‹¨í•œ UDP datagram**

```
Pseudo-header:
  153.18.8.105    â†’ 10011001 00010010 00001000 01101001
  171.2.14.10     â†’ 10101011 00000010 00001110 00001010
  All 0s | 17 | 15 â†’ 00000000 00010001 00000000 00001111

UDP Header:
  1087 (port)     â†’ 00000100 00111111
  13 (port)       â†’ 00000000 00001101
  15 (length)     â†’ 00000000 00001111
  Checksum        â†’ 00000000 00000000 (ê³„ì‚° ì „)

Data:
  T E S T         â†’ 01010100 01000101 01010011 01010100
  I N G           â†’ 01001001 01001110 01000111 00000000 (padding)

ê³„ì‚°:
  10011001 00010010  (153.18)
+ 00001000 01101001  (8.105)
+ 10101011 00000010  (171.2)
+ 00001110 00001010  (14.10)
+ 00000000 00010001  (0 and 17)
+ 00000000 00001111  (15)
+ 00000100 00111111  (1087)
+ 00000000 00001101  (13)
+ 00000000 00001111  (15)
+ 00000000 00000000  (0 - checksum)
+ 01010100 01000101  (T and E)
+ 01010011 01010100  (S and T)
+ 01001001 01001110  (I and N)
+ 01000111 00000000  (G and 0 - padding)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  10010110 11101011  â†’ Sum

One's Complement:
  01101001 00010100  â†’ Checksum!
```

### Checksum ê²€ì¦ (ìˆ˜ì‹  ì¸¡)

**ìˆ˜ì‹  ì¸¡ ì ˆì°¨:**

```
1. Pseudo-headerë¥¼ UDP segmentì— ì¶”ê°€
2. í•„ìš”ì‹œ padding ì¶”ê°€
3. 16-bit wordsë¡œ ë¶„í• 
4. One's complement arithmeticìœ¼ë¡œ ëª¨ë‘ ë”í•˜ê¸°
5. ê²°ê³¼ë¥¼ complement

6. ê²°ê³¼ê°€ all 0'sì´ë©´:
   - Pseudo-headerì™€ padding ì œê±°
   - Segment ìˆ˜ë½ âœ…
   ê·¸ë ‡ì§€ ì•Šìœ¼ë©´:
   - Segment íê¸° âŒ
```

### Pseudo-headerì˜ ëª©ì 

**ì—­ì‚¬ì  ë°°ê²½ (David P. Reed, 2005):**

> "TCP (and UDP) are end-to-end protocols. In particular, the TCP checksum is 'end-to-end'. It is a 'private matter' between end points implementing the TCP layer, guaranteeing end-to-end reliability, not hop-by-hop reliability."

**í•µì‹¬ ì´ìœ :**

```
1. Source/Destination AddressëŠ” ì˜ë¯¸ ìˆëŠ” ì •ë³´
   â†’ IPì™€ TCP/UDP ì–‘ìª½ì—ì„œ ì‚¬ìš©
   â†’ ì¤‘ë³µ ì €ì¥ë³´ë‹¤ëŠ” "virtual header" (pseudo-header) ì‚¬ìš©

2. End-to-end ì•”í˜¸í™” ë³´í˜¸
   â†’ SA, DA ë“±ì„ checksumì— í¬í•¨í•˜ì—¬
   â†’ Man-in-the-middle ê³µê²© ë°©ì–´
   â†’ SAì™€ DAëŠ” ì˜ë¯¸ ìˆìœ¼ë¯€ë¡œ IPê°€ ë³€ê²½í•˜ë©´ ì•ˆ ë¨

3. NATì˜ ë¬¸ì œ
   â†’ NATê°€ end-to-end ì•”í˜¸í™”ë¥¼ ë°©í•´
   â†’ Middleboxì˜ ë“±ì¥ìœ¼ë¡œ ì›ë˜ ì„¤ê³„ í›¼ì†
```

{:.prompt-info}
> **Pseudo-headerì˜ ì˜ë¯¸**: IP í—¤ë” ì •ë³´ë¥¼ checksumì— í¬í•¨ì‹œì¼œ íŒ¨í‚·ì´ ì˜¬ë°”ë¥¸ í˜¸ìŠ¤íŠ¸ì— ì „ë‹¬ë˜ì—ˆëŠ”ì§€ ê²€ì¦!

-----

## **Encapsulation & Decapsulation**

### ì†¡ì‹  ê³¼ì • (Encapsulation)

```
Process (Application)
    â”‚
    â”‚ Message
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Message from process         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Add UDP header
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UDP    â”‚     UDP data       â”‚
â”‚  header  â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Add IP header
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    IP    â”‚      IP data       â”‚
â”‚  header  â”‚  (UDP segment)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Add Frame header
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frame   â”‚    Frame data      â”‚
â”‚  header  â”‚   (IP datagram)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
   Network
```

### ìˆ˜ì‹  ê³¼ì • (Decapsulation)

```
   Network
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frame   â”‚    Frame data      â”‚
â”‚  header  â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Remove Frame header
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    IP    â”‚      IP data       â”‚
â”‚  header  â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Remove IP header
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UDP    â”‚     UDP data       â”‚
â”‚  header  â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Remove UDP header
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Message to process           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
Process (Application)
```

**ê³„ì¸µë³„ ì²˜ë¦¬:**

| ê³„ì¸µ            | ì†¡ì‹  (Encapsulation) | ìˆ˜ì‹  (Decapsulation)       |
| :-------------- | :------------------- | :------------------------- |
| **Application** | Message ìƒì„±         | Message ìˆ˜ì‹                |
| **Transport**   | UDP header ì¶”ê°€      | UDP header ì œê±°, Port í™•ì¸ |
| **Network**     | IP header ì¶”ê°€       | IP header ì œê±°, IP í™•ì¸    |
| **Link**        | Frame header ì¶”ê°€    | Frame header ì œê±°          |

-----

## **UDPì˜ ì¥ë‹¨ì **

### UDPì˜ ì¥ì 

**âœ… 1. ë‚®ì€ ì˜¤ë²„í—¤ë“œ**
```
TCP header: ìµœì†Œ 20 bytes
UDP header: ê³ ì • 8 bytes
â†’ ëŒ€ì—­í­ íš¨ìœ¨ì !
```

**âœ… 2. ë‚®ì€ ì§€ì—° (Low Latency)**
```
TCP: ì—°ê²° ì„¤ì • (3-way handshake) í•„ìš”
UDP: ì¦‰ì‹œ ë°ì´í„° ì „ì†¡ ê°€ëŠ¥
â†’ ì‹¤ì‹œê°„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ìœ ë¦¬!
```

**âœ… 3. Multicast/Broadcast ì§€ì›**
```
TCP: 1:1 í†µì‹ ë§Œ ê°€ëŠ¥
UDP: 1:N í†µì‹  ê°€ëŠ¥
â†’ IPTV, í™”ìƒíšŒì˜, ë¼ìš°í„° discovery ë“±
```

**âœ… 4. ë‹¨ìˆœì„±**
```
ì—°ê²° ìƒíƒœ ê´€ë¦¬ ë¶ˆí•„ìš”
íë¦„ ì œì–´, í˜¼ì¡ ì œì–´ ì—†ìŒ
â†’ êµ¬í˜„ ë° ë””ë²„ê¹… ìš©ì´
```

### UDPì˜ ë‹¨ì 

**âŒ 1. ì‹ ë¢°ì„± ì—†ìŒ**
```
íŒ¨í‚· ì†ì‹¤ ê°€ëŠ¥
ì¤‘ë³µ ê°€ëŠ¥
ìˆœì„œ ë’¤ë°”ë€œ ê°€ëŠ¥
â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œ ì²˜ë¦¬ í•„ìš”
```

**âŒ 2. í˜¼ì¡ ì œì–´ ì—†ìŒ**
```
ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê³ ë ¤ ì•ˆ í•¨
ê³¼ë„í•œ íŠ¸ë˜í”½ ë°œìƒ ê°€ëŠ¥
â†’ ë„¤íŠ¸ì›Œí¬ í˜¼ì¡ ì•…í™” ê°€ëŠ¥
```

**âŒ 3. ìˆœì„œ ë³´ì¥ ì—†ìŒ**
```
ë¨¼ì € ë³´ë‚¸ íŒ¨í‚·ì´ ë‚˜ì¤‘ì— ë„ì°© ê°€ëŠ¥
ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì§ì ‘ ì¬ì •ë ¬ í•„ìš”
```

-----

## **UDP ì‚¬ìš© ì‚¬ë¡€ ë¶„ì„**

### 1. DNS (Domain Name System)

**ì™œ UDP?**

```
íŠ¹ì§•:
  - ì§§ì€ ìš”ì²­/ì‘ë‹µ (Query/Response)
  - ë³´í†µ 512 bytes ì´í•˜
  - ë¹ ë¥¸ ì‘ë‹µì´ ì¤‘ìš”

ë™ì‘:
  Client â”€â”€(Query: www.example.com)â”€â”€â–º DNS Server
  Client â—„â”€(Response: 93.184.216.34)â”€â”€ DNS Server

ì¥ì :
  âœ… TCPì˜ 3-way handshake ì˜¤ë²„í—¤ë“œ ì—†ìŒ
  âœ… ë‹¨ì¼ UDP datagramìœ¼ë¡œ ì™„ë£Œ
  âœ… ì‘ë‹µ ì—†ìœ¼ë©´ ì¬ì „ì†¡ (ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨)

ë‹¨, 512 bytes ì´ˆê³¼ ì‹œ â†’ TCPë¡œ ì „í™˜!
```

### 2. DHCP (Dynamic Host Configuration Protocol)

**ì™œ UDP?**

```
íŠ¹ì§•:
  - í´ë¼ì´ì–¸íŠ¸ëŠ” ì•„ì§ IP ì£¼ì†Œê°€ ì—†ìŒ!
  - Broadcast ì‚¬ìš© í•„ìš”
  - ì§§ì€ íŠ¸ëœì­ì…˜

ë™ì‘:
  Client (0.0.0.0) â”€â”€(DHCP Discover - Broadcast)â”€â”€â–º Server
  Client          â—„â”€(DHCP Offer)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Server
  Client          â”€â”€(DHCP Request)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   Server
  Client          â—„â”€(DHCP ACK)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   Server

ì¥ì :
  âœ… Broadcast ê°€ëŠ¥ (TCPëŠ” ë¶ˆê°€ëŠ¥)
  âœ… IP ì£¼ì†Œ ì—†ì´ë„ í†µì‹  ê°€ëŠ¥
  âœ… ë¹ ë¥¸ ì£¼ì†Œ í• ë‹¹
```

### 3. Real-time ì• í”Œë¦¬ì¼€ì´ì…˜ (VoIP, í™”ìƒíšŒì˜)

**ì™œ UDP?**

```
íŠ¹ì§•:
  - ì§€ì—° > ì‹ ë¢°ì„±
  - ì˜¤ë˜ëœ ë°ì´í„°ëŠ” ë¬´ìš©ì§€ë¬¼
  - ì‹¤ì‹œê°„ì„±ì´ í•µì‹¬

ì˜ˆì‹œ: VoIP (Voice over IP)
  - 200ms ì´ìƒ ì§€ì—° â†’ ëŒ€í™” ë¶ˆê°€ëŠ¥
  - 1-2% íŒ¨í‚· ì†ì‹¤ â†’ ì‚¬ëŒ ê·€ë¡œ êµ¬ë³„ ì–´ë ¤ì›€
  - ì¬ì „ì†¡ëœ ì˜¤ë˜ëœ ìŒì„± ë°ì´í„° â†’ ì“¸ëª¨ì—†ìŒ

TCP ë¬¸ì œ:
  âŒ ì¬ì „ì†¡ìœ¼ë¡œ ì¸í•œ ì§€ì—° ì¦ê°€
  âŒ Head-of-line blocking
  âŒ í˜¼ì¡ ì œì–´ë¡œ ì¸í•œ ì²˜ë¦¬ëŸ‰ ê°ì†Œ

UDP ì¥ì :
  âœ… ìµœì†Œ ì§€ì—°
  âœ… ì†ì‹¤ëœ ë°ì´í„°ëŠ” ê·¸ëƒ¥ ë¬´ì‹œ
  âœ… ì¼ì •í•œ ì „ì†¡ ì†ë„ ìœ ì§€
```

### 4. SNMP (Simple Network Management Protocol)

**ì™œ UDP?**

```
íŠ¹ì§•:
  - ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§
  - ì£¼ê¸°ì ì¸ polling
  - ê°„ë‹¨í•œ ìš”ì²­/ì‘ë‹µ

ì¥ì :
  âœ… ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ ë°œìƒ ì‹œì—ë„ ë™ì‘
     (TCPëŠ” ì—°ê²° ì„¤ì • ìì²´ê°€ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŒ)
  âœ… ê²½ëŸ‰ í”„ë¡œí† ì½œ
  âœ… ë§ì€ ì¥ë¹„ë¥¼ ë¹ ë¥´ê²Œ polling
```

### 5. Multicast ì• í”Œë¦¬ì¼€ì´ì…˜

**ì™œ UDP?**

```
íŠ¹ì§•:
  - 1:N í†µì‹ 
  - ë™ì¼ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ìˆ˜ì‹ ìì—ê²Œ

ì˜ˆì‹œ:
  - IPTV
  - ì‹¤ì‹œê°„ ì£¼ì‹ ì •ë³´
  - ë©€í‹°ìºìŠ¤íŠ¸ ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë°
  - ë¼ìš°í„° discovery

TCP ë¶ˆê°€ëŠ¥:
  âŒ TCPëŠ” unicastë§Œ ì§€ì›
  âŒ ê° ìˆ˜ì‹ ìë§ˆë‹¤ ë³„ë„ ì—°ê²° í•„ìš”
  âŒ í™•ì¥ì„± ë¬¸ì œ

UDP ì¥ì :
  âœ… ìì—°ìŠ¤ëŸ¬ìš´ multicast ì§€ì›
  âœ… ë‹¨ì¼ íŒ¨í‚·ìœ¼ë¡œ ëª¨ë“  ìˆ˜ì‹ ìì—ê²Œ ì „ë‹¬
```

-----

## **UDP vs TCP ì„ íƒ ê¸°ì¤€**

### ì„ íƒ ê°€ì´ë“œ

**UDPë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°:**

```
âœ… ì‹¤ì‹œê°„ì„±ì´ ì¤‘ìš”í•œ ê²½ìš° (VoIP, ê²Œì„, í™”ìƒíšŒì˜)
âœ… Multicast/Broadcastê°€ í•„ìš”í•œ ê²½ìš°
âœ… ì§§ì€ íŠ¸ëœì­ì…˜ (DNS, DHCP)
âœ… ì†ì‹¤ì„ ê°ë‚´í•  ìˆ˜ ìˆëŠ” ê²½ìš°
âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œ ì‹ ë¢°ì„± êµ¬í˜„ ê°€ëŠ¥í•œ ê²½ìš°
âœ… ìµœì†Œ ì˜¤ë²„í—¤ë“œê°€ í•„ìš”í•œ ê²½ìš°
```

**TCPë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°:**

```
âœ… ë°ì´í„° ë¬´ê²°ì„±ì´ ì¤‘ìš”í•œ ê²½ìš° (íŒŒì¼ ì „ì†¡, ì´ë©”ì¼)
âœ… ìˆœì„œê°€ ì¤‘ìš”í•œ ê²½ìš°
âœ… ì‹ ë¢°ì„± ìˆëŠ” ì „ì†¡ì´ í•„ìˆ˜ì¸ ê²½ìš° (HTTP, FTP)
âœ… ëŒ€ëŸ‰ì˜ ë°ì´í„° ì „ì†¡
âœ… íë¦„ ì œì–´ì™€ í˜¼ì¡ ì œì–´ê°€ í•„ìš”í•œ ê²½ìš°
```

**ë¹„êµí‘œ:**

| íŠ¹ì„±            | UDP ì í•© | TCP ì í•© |
| :-------------- | :------- | :------- |
| **ì‹¤ì‹œê°„ì„±**    | âœ… VoIP   | âŒ        |
| **íŒŒì¼ ì „ì†¡**   | âŒ        | âœ… FTP    |
| **ë©€í‹°ìºìŠ¤íŠ¸**  | âœ… IPTV   | âŒ        |
| **ì§§ì€ ì¿¼ë¦¬**   | âœ… DNS    | âŒ        |
| **ìŠ¤íŠ¸ë¦¬ë°**    | âœ… (ì§€ì—°) | âœ… (í’ˆì§ˆ) |
| **ê²Œì„**        | âœ…        | âŒ        |
| **ì›¹ ë¸Œë¼ìš°ì§•** | âŒ        | âœ… HTTP   |
| **ì´ë©”ì¼**      | âŒ        | âœ… SMTP   |

-----

## **ì •ë¦¬**

### UDPì˜ í•µì‹¬ íŠ¹ì§•

| íŠ¹ì§•               | ì„¤ëª…                          |
| :----------------- | :---------------------------- |
| **Unreliable**     | ì†ì‹¤, ì¤‘ë³µ, ìˆœì„œ ë°”ë€œ ê°€ëŠ¥    |
| **Connectionless** | ì—°ê²° ì„¤ì • ì—†ì´ ì¦‰ì‹œ ì „ì†¡      |
| **Datagram**       | ê° ë©”ì‹œì§€ ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬     |
| **Simple**         | ìµœì†Œ ì˜¤ë²„í—¤ë“œ (8 byte header) |
| **Fast**           | ë‚®ì€ ì§€ì—°, ì‹¤ì‹œê°„ í†µì‹ ì— ìœ ë¦¬ |
| **Multicast**      | 1:N í†µì‹  ì§€ì›                 |

### UDP Header ìš”ì•½

| í•„ë“œ         | í¬ê¸°    | ì—­í•                    |
| :----------- | :------ | :--------------------- |
| **Src Port** | 16 bits | ì†¡ì‹  ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹ë³„ |
| **Dst Port** | 16 bits | ìˆ˜ì‹  ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹ë³„ |
| **Length**   | 16 bits | ì „ì²´ ê¸¸ì´ (8~65535)    |
| **Checksum** | 16 bits | ë¬´ê²°ì„± ê²€ì¦            |

### Port Number ë²”ìœ„

| ë²”ìœ„        | ë¶„ë¥˜            | ìš©ë„                |
| :---------- | :-------------- | :------------------ |
| 1-1023      | Well-known      | í‘œì¤€ ì„œë¹„ìŠ¤         |
| 1024-49151  | Registered      | ë“±ë¡ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ |
| 49152-65535 | Private/Dynamic | ì„ì‹œ í¬íŠ¸           |

{:.prompt-tip}
> **UDPì˜ ì² í•™**: "ë‹¨ìˆœí•¨ì´ ê°•ë ¥í•¨ì´ë‹¤." - ìµœì†Œí•œì˜ ê¸°ëŠ¥ë§Œ ì œê³µí•˜ê³ , í•„ìš”í•œ ê¸°ëŠ¥ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬í˜„!

**UDPì˜ í•µì‹¬ ê°€ì¹˜:**
* âœ… IP + Multiplexing/Demultiplexing
* âœ… Low overhead, Low latency
* âœ… Multicast support
* âŒ No reliability, No flow control
* âœ… Perfect for real-time, short transactions, multicast

-----

## **References**

* RFC 768 (User Datagram Protocol)
* RFC 1122 (Requirements for Internet Hosts)
* Prof. Jongwon Yoon, Intelligent Machines Lab
* David P. Reed, "Purpose of pseudo header in TCP checksum", 2005
