---
title: "[CA] Chapter 2-1: Memory Operands, R/I-type"

categories: [CS, Computer Architecture, CA, Assembly language]
tags:
  - [CS, c, cpp, Computer Architecture, CA, Assembly language, binary code]
toc: true
toc_sticky: true

date: 2025-03-24
last_modified_at: 2025-03-24
---
âš™ **Computer Architecture ê³µë¶€**

## Memory Operands
---
* MIPS CPUëŠ” **<span style="color: #008000">32ê°œì˜ registers</span>ë§Œ ê°€ì§€ê³  ìˆì–´ ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ì²˜ë¦¬í•˜ê¸° ì–´ë ¤ì›€**
* ë°°ì—´ì´ë‚˜ êµ¬ì¡°ì²´ëŠ” ë ˆì§€ìŠ¤í„°ë³´ë‹¤ í›¨ì”¬ ë§ì€ ë°ì´í„° ìš”ì†Œë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŒ
* ì‹¤ì œë¡œ ë°ì´í„° êµ¬ì¡°ëŠ” ë©”ëª¨ë¦¬ì— ì €ì¥ë¨ (**ë ˆì§€ìŠ¤í„°ê°€ ì•„ë‹Œ**)
* í•˜ì§€ë§Œ ì‚°ìˆ  ëª…ë ¹ì–´ì˜ í”¼ì—°ì‚°ì(operands)ëŠ” ë°˜ë“œì‹œ registerì— ìˆì–´ì•¼ í•¨

![alt text](../assets/img/Architecture/Memory_sturcture.png)
> Memory_sturcture
* Memory is a large, **single-dimensional array**
* The unit is a **byte**
* Address acting as **index** to that array, **staring from 0**

ğŸ“šì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ MIPSì—ëŠ” **<span style="color: #008000">Data transfer instructions(load and store)</span>**ì´ í¬í•¨ë˜ì–´ìˆìŒ  
* `Load`: ë©”ëª¨ë¦¬ì—ì„œ ë ˆì§€ìŠ¤í„°ë¡œ ë°ì´í„° ì „ì†¡
* `Store`: ë ˆì§€ìŠ¤í„°ì—ì„œ ë©”ëª¨ë¦¬ë¡œ ë°ì´í„° ì „ì†¡

### Load Instruction (lw - load word)
---
* í˜•ì‹: `lw register_to_be_loaded memory_address_to_be_accessed`
  * `memory_address_to_be_accessed`: index
##### ê¸°ë³¸ ì˜ˆì‹œ  
```
lw $t0, 32($s3)  # $t0 = Memory[$s3 + 32]
```  
> ì˜ë¯¸: ì£¼ì†Œ `s3`ì—ì„œ `32ë°”ì´íŠ¸`ë§Œí¼ ë–¨ì–´ì§„ **ë©”ëª¨ë¦¬ ìœ„ì¹˜ì˜ ê°’**ì„ `t0`ì— ë¡œë“œ

##### `g = h + A[8];` êµ¬í˜„ ì˜ˆì œ
* ê°€ì •1: AëŠ” 100ê°œ ìš”ì†Œë¥¼ ê°€ì§„ 4ë°”ì´íŠ¸ ì •ìˆ˜ ë°°ì—´
* ê°€ì •2: Aì˜ ê¸°ë³¸ ì£¼ì†ŒëŠ” `$s3`ì— ì €ì¥ë¨
* ê°€ì •3: ë³€ìˆ˜ gì™€ hëŠ” ê°ê° `$s1`ê³¼ `$s2`ì— ë§¤í•‘ë¨
```
lw $t0, 32($s3)    # $t0 = A[8] (32 = 8*4bytes)
add $s1, $s2, $t0  # $s1 = $s2 + $t0 (g = h + A[8])
```

### Store Instruction (sw - store word)
---
* í˜•ì‹: `sw register_to_be_storedmemory_address_to_be_accessed`

##### ê¸°ë³¸ ì˜ˆì‹œ
```
sw $t0, 48($s3)  # Memory[$s3 + 48] = $t0
```
> ì˜ë¯¸: ì£¼ì†Œ `s3`ì—ì„œ `48ë°”ì´íŠ¸`ë§Œí¼ ë–¨ì–´ì§„ **ë©”ëª¨ë¦¬ ìœ„ì¹˜ì˜ ê°’**ì„ `t0`ì— ì €ì¥

##### `A[12] = h + A[8];` êµ¬í˜„ ì˜ˆì œ
```
lw $t0, 32($s3)    # $t0 = A[8] (32 = 8*4bytes)
add $t0, $s2, $t0  # $t0 = $s2 + $t0 (h + A[8])
sw $t0, 48($s3)    # A[12] = $t0 (48 = 12*4bytes)
```

## Representing MIPS Insturction
---
âœ… MIPS ëª…ë ¹ì–´(`add`, `sub`, `addi`, `lw`, `sw` ë“±)ë„ ê²°êµ­ **ì •ë³´ì´ë¯€ë¡œ ì´ì§„ìˆ˜ë¡œ í‘œí˜„ ê°€ëŠ¥**  
* ëª¨ë“  MIPS ëª…ë ¹ì–´ëŠ” **32bist(4bytes) ê¸¸ì´ë¥¼ ê°€ì§**

### R-Type(Register-type) ëª…ë ¹ì–´
---
* ì–´ë–¤ ëª…ë ¹ì–´ì¸ì§€, **ì–´ë–¤ ë ˆì§€ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ë“±ì„ ë‚˜íƒ€ë‚´ëŠ” í•„ë“œ**ë“¤ë¡œ êµ¬ì„±

![alt text](../assets/img/Architecture/R_Type.png)
> Register-type

* `op(opcode)`: basic operation code (6bits)
* `rs`: the 1st register source operand
* `rt`: the 2nd register source operand
* `rd`: the register source operand
* `shamt`: shift amount (5bits, ì‹œí”„íŠ¸ ëª…ë ¹ì–´ì—ì„œ ì‚¬ìš©, ê·¸ ì™¸ì—ëŠ” 0)
* `funct`: function code(6bits)

* ì˜ˆì‹œ:
![alt text](../assets/img/Architecture/R_Type_ex.png)

* MIPSëŠ” **32ê°œì˜ registerë¥¼ ê°€ì§€ë©°**, ê° ë ˆì§€ìŠ¤í„°ëŠ” íŠ¹ì • ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë¨:
![alt text](../assets/img/Architecture/Register_number.png)

### I-Type(Immediate-type) ëª…ë ¹ì–´
---
* **contants** ë˜ëŠ” **address offsetì„ í¬í•¨í•˜ëŠ” ëª…ë ¹ì–´ì— ì‚¬ìš©**ë¨ (`Data transfer instructions`, `Immediate instructions` ë“±)

![alt text](../assets/img/Architecture/I_Type.png)
> Immediate-type

* `constant/address`: ìƒìˆ˜ ê°’ ë˜ëŠ” ì£¼ì†Œ ì˜¤í”„ì…‹ (16ë¹„íŠ¸)

* ì˜ˆì‹œ:
![alt text](../assets/img/Architecture/Immediate_number.png)

#### ì¢…í•© ì˜ˆì‹œ
* **ë°°ì—´ ìš”ì†Œ ì—…ë°ì´íŠ¸:** `A[300] = h + A[300];`
* ê°€ì •:
  * `$t1`ì—ëŠ” ë°°ì—´ Aì˜ ê¸°ë³¸ ì£¼ì†Œê°€ ì €ì¥ë¨
  * `$s2`ëŠ” ë³€ìˆ˜ hì— í•´ë‹¹í•¨

```
lw $t0, 1200($t1)    # $t0 = A[300] (1200 = 300*4)
add $t0, $s2, $t0    # $t0 = h + A[300]
sw $t0, 1200($t1)    # A[300] = $t0
```  
1. `lw $t0, 1200($t1)` (I-type)
   * `op` = 35 (100011)
   * `rs` = 9 (01001) - $t1
   * `rt` = 8 (01000) - $t0
   * `constant`/`address` = 1200 (0000 0100 1011 0000)
   * `lw $t0, 1200($t1)` = 100011 01001 01000 0000 0100 1011 0000
2. `add $t0, $s2, $t0` (R-type)
   * `op` = 0 (000000)
   * `rs` = 18 (10010) - $s2
   * `rt` = 8 (01000) - $t0
   * `rd` = 8 (01000) - $t0
   * `shamt` = 0 (00000)
   * `funct` = 32 (100000)
3. `sw $t0, 1200($t1)` (I-type)
   * `op` = 43 (101011)
   * `rs` = 9 (01001) - $t1
   * `rt` = 8 (01000) - $t0
   * `constant` = 1200 (0000 0100 1011 0000)